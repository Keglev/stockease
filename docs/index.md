# StockEase Backend Documentation

**Published at:** https://Keglev.github.io/stockease/

## 🏗️ Documentation Architecture

This folder (`/backend/docs/`) contains **source documentation that lives in the `main` branch**. 

### Key Principle
- **`/backend/docs/` in main branch**: Source Markdown files (architecture docs, design decisions)
  - ✅ Committed to main branch
  - ✅ NOT deployed to Koyeb (documentation only)
  - ✅ Always part of the repository

- **`docs` branch**: Generated HTML output ONLY
  - ✅ Created by docs-ci.yml pipeline
  - ✅ Published to GitHub Pages
  - ❌ Never edited manually

## 🔄 Pipeline Flow

```
1. Developer pushes to origin/main (includes changes to /backend/docs/)
   ↓
2. Backend CI runs (build, test)
   ↓
3. Docs pipeline triggered (docs-ci.yml)
   - Extract OpenAPI spec from @Operation annotations
   - Convert Markdown → HTML (using pandoc or similar)
   - Generate Redoc interactive API docs
   - Collect JaCoCo test coverage reports
   ↓
4. Generated HTML files committed to docs branch
   ↓
5. GitHub Pages publishes from docs branch
   ↓
6. Live at https://Keglev.github.io/stockease/
```

## 📁 Directory Structure

### Main Branch (Source Files)
```
/backend/docs/                    ← These files: STAY in main branch
├── index.md                      ← This file: documentation guide
├── architecture/                 ← System design decisions
│   ├── overview.md              ← Architecture overview, C4 model
│   ├── layers.md                ← Service layers, data flow
│   ├── security.md              ← Authentication, authorization
│   └── deployment.md            ← Infrastructure, CI/CD, monitoring
└── api/
    ├── openapi/                 ← OpenAPI spec location
    └── redoc/                   ← Redoc HTML location
```

### Docs Branch (Generated - GitHub Pages)
```
docs branch (GitHub Pages output)  ← Generated by CI, NOT edited manually
├── index.html
├── architecture/
│   ├── overview.html
│   ├── layers.html
│   ├── security.html
│   └── deployment.html
├── api/
│   └── redoc/
│       └── index.html
└── coverage/
    └── index.html
```

## 🛠️ How to Contribute

1. **Edit .md files** in `/backend/docs/` on `main` branch
2. **Add @Operation annotations** to controllers (OpenAPI spec generation)
3. **Push to main** → docs-ci.yml pipeline automatically:
   - Converts Markdown to HTML
   - Generates Redoc API docs
   - Collects coverage reports
   - Commits to docs branch
4. **View live** at https://Keglev.github.io/stockease/

## 📚 Sections

- **[Architecture](./architecture/)** — System design, decisions, deployment
- **[API](./api/)** — OpenAPI spec and interactive Redoc documentation
- **[Coverage](./coverage/)** — JaCoCo test coverage reports

---

**Branch:** main  
**Deployment:** docs-ci.yml pipeline  
**Access:** https://Keglev.github.io/stockease/
