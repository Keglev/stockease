<!--
================================================================================
                    STOCKEASE ENTERPRISE DOCUMENTATION TEMPLATE
================================================================================

File: enterprise-docs.html
Purpose: 
  Professional HTML template for generating enterprise-grade architecture 
  documentation using Pandoc. Used by the docs-pipeline.yml GitHub Actions
  workflow to convert markdown to styled HTML with sidebar navigation and
  mermaid diagram support.

Template Engine: Pandoc (pandoc.org)
  - Variables: , <h1 id="components-architecture">Components
Architecture</h1>
<h2 id="overview">Overview</h2>
<p>The StockEase backend is composed of several key components that
interact to provide product inventory management functionality. This
section describes each major component and its responsibilities.</p>
<h2 id="component-interactions">Component Interactions</h2>
<pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   REST Clients                          â”‚
â”‚         (Frontend, Mobile, Third-party APIs)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Spring Security Layer                      â”‚
â”‚         (CORS, JWT, Authentication)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Controllers                            â”‚
â”‚  â”œâ”€â”€ AuthController (login, register, validate)       â”‚
â”‚  â”œâ”€â”€ ProductController (CRUD, search, pagination)     â”‚
â”‚  â””â”€â”€ HealthController (system status)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Service Layer                             â”‚
â”‚  â”œâ”€â”€ AuthService (authentication logic)               â”‚
â”‚  â”œâ”€â”€ ProductService (business logic)                  â”‚
â”‚  â””â”€â”€ HealthService (health checks)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Repository Layer (JPA)                     â”‚
â”‚  â”œâ”€â”€ UserRepository (User persistence)                â”‚
â”‚  â”œâ”€â”€ ProductRepository (Product persistence)          â”‚
â”‚  â””â”€â”€ Custom queries and specifications                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ JDBC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Database Layer                            â”‚
â”‚  â”œâ”€â”€ PostgreSQL (production)                          â”‚
â”‚  â”œâ”€â”€ H2 (testing)                                     â”‚
â”‚  â””â”€â”€ Flyway (migrations)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
<h2 id="authcontroller">AuthController</h2>
<p><strong>Location</strong>:
<code>src/main/java/com/stocks/stockease/controller/AuthController.java</code></p>
<p><strong>Responsibility</strong>: Handle authentication endpoints</p>
<p><strong>Endpoints</strong>:</p>
<pre><code>POST /api/auth/register
  Input: { username, email, password }
  Output: { userId, username, role }
  Status: 201 Created / 400 Bad Request

POST /api/auth/login
  Input: username + password (HTTP Basic)
  Output: { token, userId, username, role }
  Status: 200 OK / 401 Unauthorized

GET /api/auth/validate
  Input: JWT token in header
  Output: { valid, userId, username, role }
  Status: 200 OK / 401 Unauthorized</code></pre>
<p><strong>Integration</strong>:</p>
<pre><code>AuthController
  â†“ calls
AuthService
  â†“ uses
UserRepository
  â†“ persists
User Entity (users table)</code></pre>
<p><strong>Dependencies</strong>: - <code>AuthService</code> - business
logic - <code>UserRepository</code> - data access -
<code>PasswordEncoder</code> - password hashing - <code>JwtUtil</code> -
token generation</p>
<p><strong>Error Handling</strong>: - Username already exists â†’ 400 Bad
Request - Invalid credentials â†’ 401 Unauthorized - Expired token â†’ 401
Unauthorized - Internal server error â†’ 500 Internal Server Error</p>
<h2 id="productcontroller">ProductController</h2>
<p><strong>Location</strong>:
<code>src/main/java/com/stocks/stockease/controller/ProductController.java</code></p>
<p><strong>Responsibility</strong>: Handle product management
endpoints</p>
<p><strong>Endpoints</strong>:</p>
<pre><code>GET /api/products
  Query: ?page=0&amp;size=20&amp;sort=name,asc&amp;category=electronics
  Output: { content: [], page, size, totalElements, totalPages }
  Auth: JWT required

GET /api/products/{id}
  Output: { id, name, description, price, quantity, sku, category, createdAt }
  Auth: JWT required

POST /api/products
  Input: { name, description, price, quantity, sku, category }
  Output: { id, name, ... }
  Auth: JWT + ADMIN role required

PUT /api/products/{id}
  Input: { name, description, price, quantity, category }
  Output: { id, name, ... (updated) }
  Auth: JWT + ADMIN role required

DELETE /api/products/{id}
  Output: { message: &quot;Product deleted successfully&quot; }
  Auth: JWT + ADMIN role required</code></pre>
<p><strong>Integration</strong>:</p>
<pre><code>ProductController
  â†“ calls
ProductService
  â†“ uses
ProductRepository
  â†“ persists
Product Entity (products table)</code></pre>
<p><strong>Dependencies</strong>: - <code>ProductService</code> -
business logic - <code>ProductRepository</code> - data access -
<code>SecurityContext</code> - user authentication</p>
<p><strong>Error Handling</strong>: - Product not found â†’ 404 Not Found
- Insufficient permissions â†’ 403 Forbidden - Validation errors â†’ 400 Bad
Request - SKU already exists â†’ 400 Bad Request</p>
<h2 id="healthcontroller">HealthController</h2>
<p><strong>Location</strong>:
<code>src/main/java/com/stocks/stockease/controller/HealthController.java</code></p>
<p><strong>Responsibility</strong>: Provide system health status</p>
<p><strong>Endpoints</strong>:</p>
<pre><code>GET /health
  Output: { status, components: { db, diskSpace, ... } }
  Auth: None required

GET /health/liveness
  Output: { status }
  Auth: None required

GET /health/readiness
  Output: { status, components: { db, ... } }
  Auth: None required</code></pre>
<p><strong>Used By</strong>: - Koyeb health checks - Monitoring systems
- Load balancers</p>
<h2 id="authservice">AuthService</h2>
<p><strong>Location</strong>:
<code>src/main/java/com/stocks/stockease/service/AuthService.java</code></p>
<p><strong>Responsibility</strong>: Authentication business logic</p>
<p><strong>Methods</strong>:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> UserDTO <span class="fu">register</span><span class="op">(</span>RegisterRequest request<span class="op">)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Validate <span class="fu">input</span> <span class="op">(</span>username<span class="op">,</span> email<span class="op">,</span> password<span class="op">)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check username uniqueness</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Hash password with BCrypt</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Create User entity</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Save to database</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return UserDTO</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> LoginResponse <span class="fu">authenticate</span><span class="op">(</span><span class="bu">String</span> username<span class="op">,</span> <span class="bu">String</span> password<span class="op">)</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find user by username</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Verify password</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Generate JWT token</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return token <span class="op">+</span> user info</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> UserDTO <span class="fu">validateToken</span><span class="op">(</span><span class="bu">String</span> token<span class="op">)</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Parse JWT token</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Verify signature</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check expiration</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return user info</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">logout</span><span class="op">(</span><span class="bu">String</span> userId<span class="op">)</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Invalidate <span class="fu">token</span> <span class="op">(</span>future<span class="op">:</span> add to blacklist<span class="op">)</span></span></code></pre></div>
<p><strong>Validation Rules</strong>: - Username: 3-50 chars,
alphanumeric + underscore - Email: valid email format - Password: 8+
chars, mixed case + numbers - Role: ADMIN or USER</p>
<p><strong>Transactions</strong>: - <code>register()</code> - <span
class="citation" data-cites="Transactional">@Transactional</span> -
<code>authenticate()</code> - read-only - <code>validateToken()</code> -
read-only</p>
<h2 id="productservice">ProductService</h2>
<p><strong>Location</strong>:
<code>src/main/java/com/stocks/stockease/service/ProductService.java</code></p>
<p><strong>Responsibility</strong>: Product business logic</p>
<p><strong>Methods</strong>:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> Page<span class="op">&lt;</span>ProductDTO<span class="op">&gt;</span> <span class="fu">getProducts</span><span class="op">(</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> page<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="bu">String</span> sort<span class="op">,</span> <span class="bu">String</span> category<span class="op">)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Build dynamic query with filters</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Apply pagination</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Execute query</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="bu">Map</span> to DTOs</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return PageResponse</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ProductDTO <span class="fu">getProductById</span><span class="op">(</span><span class="bu">UUID</span> id<span class="op">)</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find product by ID</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return ProductDTO</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Throw EntityNotFoundException <span class="cf">if</span> not found</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ProductDTO <span class="fu">createProduct</span><span class="op">(</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    CreateProductRequest request<span class="op">,</span> <span class="bu">UUID</span> userId<span class="op">)</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Validate request</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check <span class="fu">authorization</span> <span class="op">(</span>ADMIN only<span class="op">)</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Verify SKU uniqueness</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Create Product entity</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="bu">Set</span> <span class="fu">metadata</span> <span class="op">(</span>createdAt<span class="op">,</span> createdBy<span class="op">)</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Save to database</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return ProductDTO</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ProductDTO <span class="fu">updateProduct</span><span class="op">(</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">UUID</span> id<span class="op">,</span> UpdateProductRequest request<span class="op">,</span> <span class="bu">UUID</span> userId<span class="op">)</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find product by ID</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Validate request</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check <span class="fu">authorization</span> <span class="op">(</span>ADMIN only<span class="op">)</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Update fields</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Save changes</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return updated ProductDTO</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">deleteProduct</span><span class="op">(</span><span class="bu">UUID</span> id<span class="op">,</span> <span class="bu">UUID</span> userId<span class="op">)</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find product by ID</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check <span class="fu">authorization</span> <span class="op">(</span>ADMIN only<span class="op">)</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Delete from database</span></code></pre></div>
<p><strong>Validation Rules</strong>: - Name: 3-255 chars, not blank -
Price: &gt; 0, max 999,999.99 - Quantity: &gt;= 0, max 1,000,000 - SKU:
3-50 chars, alphanumeric + hyphens, unique - Category: alphanumeric +
spaces</p>
<p><strong>Transactions</strong>: - <code>createProduct()</code> - <span
class="citation" data-cites="Transactional">@Transactional</span> -
<code>updateProduct()</code> - <span class="citation"
data-cites="Transactional">@Transactional</span> -
<code>deleteProduct()</code> - <span class="citation"
data-cites="Transactional">@Transactional</span> -
<code>getProducts()</code> - read-only - <code>getProductById()</code> -
read-only</p>
<h2 id="healthservice">HealthService</h2>
<p><strong>Location</strong>:
<code>src/main/java/com/stocks/stockease/service/HealthService.java</code></p>
<p><strong>Responsibility</strong>: System health checks</p>
<p><strong>Methods</strong>:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> HealthStatus <span class="fu">getHealth</span><span class="op">()</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check database connectivity</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check disk space</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check memory usage</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return aggregated status</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isDatabaseHealthy</span><span class="op">()</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Execute test query<span class="op">:</span> SELECT <span class="dv">1</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return <span class="kw">true</span> <span class="cf">if</span> successful</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return <span class="kw">false</span> <span class="cf">if</span> connection fails</span></code></pre></div>
<p><strong>Health Components</strong>: - <code>db</code> - Database
connectivity - <code>diskSpace</code> - Available disk space -
<code>livenessState</code> - Application running -
<code>readinessState</code> - Ready to accept requests</p>
<h2 id="repository-interfaces">Repository Interfaces</h2>
<h3 id="userrepository">UserRepository</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> UserRepository <span class="kw">extends</span> JpaRepository<span class="op">&lt;</span>User<span class="op">,</span> <span class="bu">UUID</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    Optional<span class="op">&lt;</span>User<span class="op">&gt;</span> <span class="fu">findByUsername</span><span class="op">(</span><span class="bu">String</span> username<span class="op">);</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    Optional<span class="op">&lt;</span>User<span class="op">&gt;</span> <span class="fu">findByEmail</span><span class="op">(</span><span class="bu">String</span> email<span class="op">);</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">boolean</span> <span class="fu">existsByUsername</span><span class="op">(</span><span class="bu">String</span> username<span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="productrepository">ProductRepository</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> ProductRepository <span class="kw">extends</span> JpaRepository<span class="op">&lt;</span>Product<span class="op">,</span> <span class="bu">UUID</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    Optional<span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findBySku</span><span class="op">(</span><span class="bu">String</span> sku<span class="op">);</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    Page<span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findByCategory</span><span class="op">(</span><span class="bu">String</span> category<span class="op">,</span> <span class="bu">Pageable</span> pageable<span class="op">);</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findByCreatedBy</span><span class="op">(</span><span class="bu">UUID</span> userId<span class="op">);</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Query</span><span class="op">(</span><span class="st">&quot;SELECT p FROM Product p WHERE p.price &gt; ?1 AND p.quantity &gt; 0&quot;</span><span class="op">)</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findAffordableInStock</span><span class="op">(</span><span class="bu">BigDecimal</span> maxPrice<span class="op">);</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="exception-handling">Exception Handling</h2>
<p><strong>Custom Exceptions</strong>: -
<code>ValidationException</code> â†’ 400 Bad Request -
<code>AuthenticationException</code> â†’ 401 Unauthorized -
<code>AuthorizationException</code> â†’ 403 Forbidden -
<code>EntityNotFoundException</code> â†’ 404 Not Found -
<code>InternalServerException</code> â†’ 500 Internal Server Error</p>
<p><strong>Global Exception Handler</strong>: -
<code>@RestControllerAdvice</code> catches exceptions - Formats error
responses - Sets appropriate HTTP status codes - Logs errors for
debugging</p>
<h2 id="component-dependencies-graph">Component Dependencies Graph</h2>
<pre><code>HealthController
  â””â”€â”€ HealthService
      â””â”€â”€ Database connection

AuthController
  â””â”€â”€ AuthService
      â”œâ”€â”€ UserRepository
      â”œâ”€â”€ PasswordEncoder
      â””â”€â”€ JwtUtil

ProductController
  â”œâ”€â”€ ProductService
  â”‚   â”œâ”€â”€ ProductRepository
  â”‚   â”œâ”€â”€ UserRepository (authorization)
  â”‚   â””â”€â”€ Validators
  â””â”€â”€ SecurityContext

SecurityConfig
  â”œâ”€â”€ JwtFilter
  â”œâ”€â”€ PasswordEncoder (BCrypt)
  â””â”€â”€ CustomUserDetailsService</code></pre>
<hr />
<p><strong>Document Version</strong>: 1.0<br />
<strong>Last Updated</strong>: October 31, 2025<br />
<strong>Status</strong>: Production
Ready</p> are substituted by Pandoc during generation
  - Standalone mode: --standalone flag ensures complete HTML output
  - Template variables documented: https://pandoc.org/MANUAL.html#templates

Key Features:
  âœ“ Responsive two-column layout (sidebar + content)
  âœ“ Professional styling via external enterprise-docs.css
  âœ“ Automatic sidebar navigation with active state highlighting
  âœ“ Mermaid.js v10 integration for architecture diagrams
  âœ“ Table of contents highlighting during scroll
  âœ“ Print-friendly styles
  âœ“ GitHub Pages compatible (absolute paths with /stockease/ root)

Browser Support: All modern browsers (Chrome, Firefox, Safari, Edge)
Accessibility: WCAG 2.1 AA compliant

Dependencies:
  - External CSS: /stockease/templates/enterprise-docs.css
  - Mermaid.js v10: https://cdn.jsdelivr.net/npm/mermaid@10/
  - Pandoc Lua Filter: /tmp/md-to-html-links.lua (converts mermaid blocks to divs)

Generated Files Location:
  - GitHub Pages: https://keglev.github.io/stockease/architecture/
  - Build Output: target/docs/architecture/ (before deployment)

Workflow Integration:
  1. docs-pipeline.yml: Runs Pandoc with this template + Lua filter
  2. Lua Filter: Converts mermaid code blocks to <div class="mermaid">
  3. Pandoc: Processes markdown with this template
  4. Output: Styled HTML in target/docs/architecture/
  5. Deployment: Published to GitHub Pages via gh-pages action

Last Updated: 2025-11-04
Version: 2.0 (CSS refactored to external file, mermaid rendering fixed)
================================================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - StockEase Architecture Documentation</title>
    <link rel="stylesheet" href="../templates/enterprise-docs.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/stockease/index.html" class="logo">ğŸ“š StockEase Architecture Docs</a>
            <nav class="nav-breadcrumb">
                <a href="/stockease/index.html">Home</a> / <span id="breadcrumb">Documentation</span>
            </nav>
        </div>
    </header>

    <div class="container">
        <aside id="sidebar"></aside>
        <main>
            <div class="content">
                <h1 id="components-architecture">Components
                Architecture</h1>
                <h2 id="overview">Overview</h2>
                <p>The StockEase backend is composed of several key
                components that interact to provide product inventory
                management functionality. This section describes each
                major component and its responsibilities.</p>
                <h2 id="component-interactions">Component
                Interactions</h2>
                <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   REST Clients                          â”‚
â”‚         (Frontend, Mobile, Third-party APIs)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/HTTPS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Spring Security Layer                      â”‚
â”‚         (CORS, JWT, Authentication)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Controllers                            â”‚
â”‚  â”œâ”€â”€ AuthController (login, register, validate)       â”‚
â”‚  â”œâ”€â”€ ProductController (CRUD, search, pagination)     â”‚
â”‚  â””â”€â”€ HealthController (system status)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Service Layer                             â”‚
â”‚  â”œâ”€â”€ AuthService (authentication logic)               â”‚
â”‚  â”œâ”€â”€ ProductService (business logic)                  â”‚
â”‚  â””â”€â”€ HealthService (health checks)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Repository Layer (JPA)                     â”‚
â”‚  â”œâ”€â”€ UserRepository (User persistence)                â”‚
â”‚  â”œâ”€â”€ ProductRepository (Product persistence)          â”‚
â”‚  â””â”€â”€ Custom queries and specifications                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ JDBC
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Database Layer                            â”‚
â”‚  â”œâ”€â”€ PostgreSQL (production)                          â”‚
â”‚  â”œâ”€â”€ H2 (testing)                                     â”‚
â”‚  â””â”€â”€ Flyway (migrations)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</code></pre>
                <h2 id="authcontroller">AuthController</h2>
                <p><strong>Location</strong>:
                <code>src/main/java/com/stocks/stockease/controller/AuthController.java</code></p>
                <p><strong>Responsibility</strong>: Handle
                authentication endpoints</p>
                <p><strong>Endpoints</strong>:</p>
                <pre><code>POST /api/auth/register
  Input: { username, email, password }
  Output: { userId, username, role }
  Status: 201 Created / 400 Bad Request

POST /api/auth/login
  Input: username + password (HTTP Basic)
  Output: { token, userId, username, role }
  Status: 200 OK / 401 Unauthorized

GET /api/auth/validate
  Input: JWT token in header
  Output: { valid, userId, username, role }
  Status: 200 OK / 401 Unauthorized</code></pre>
                <p><strong>Integration</strong>:</p>
                <pre><code>AuthController
  â†“ calls
AuthService
  â†“ uses
UserRepository
  â†“ persists
User Entity (users table)</code></pre>
                <p><strong>Dependencies</strong>: -
                <code>AuthService</code> - business logic -
                <code>UserRepository</code> - data access -
                <code>PasswordEncoder</code> - password hashing -
                <code>JwtUtil</code> - token generation</p>
                <p><strong>Error Handling</strong>: - Username already
                exists â†’ 400 Bad Request - Invalid credentials â†’ 401
                Unauthorized - Expired token â†’ 401 Unauthorized -
                Internal server error â†’ 500 Internal Server Error</p>
                <h2 id="productcontroller">ProductController</h2>
                <p><strong>Location</strong>:
                <code>src/main/java/com/stocks/stockease/controller/ProductController.java</code></p>
                <p><strong>Responsibility</strong>: Handle product
                management endpoints</p>
                <p><strong>Endpoints</strong>:</p>
                <pre><code>GET /api/products
  Query: ?page=0&amp;size=20&amp;sort=name,asc&amp;category=electronics
  Output: { content: [], page, size, totalElements, totalPages }
  Auth: JWT required

GET /api/products/{id}
  Output: { id, name, description, price, quantity, sku, category, createdAt }
  Auth: JWT required

POST /api/products
  Input: { name, description, price, quantity, sku, category }
  Output: { id, name, ... }
  Auth: JWT + ADMIN role required

PUT /api/products/{id}
  Input: { name, description, price, quantity, category }
  Output: { id, name, ... (updated) }
  Auth: JWT + ADMIN role required

DELETE /api/products/{id}
  Output: { message: &quot;Product deleted successfully&quot; }
  Auth: JWT + ADMIN role required</code></pre>
                <p><strong>Integration</strong>:</p>
                <pre><code>ProductController
  â†“ calls
ProductService
  â†“ uses
ProductRepository
  â†“ persists
Product Entity (products table)</code></pre>
                <p><strong>Dependencies</strong>: -
                <code>ProductService</code> - business logic -
                <code>ProductRepository</code> - data access -
                <code>SecurityContext</code> - user authentication</p>
                <p><strong>Error Handling</strong>: - Product not found
                â†’ 404 Not Found - Insufficient permissions â†’ 403
                Forbidden - Validation errors â†’ 400 Bad Request - SKU
                already exists â†’ 400 Bad Request</p>
                <h2 id="healthcontroller">HealthController</h2>
                <p><strong>Location</strong>:
                <code>src/main/java/com/stocks/stockease/controller/HealthController.java</code></p>
                <p><strong>Responsibility</strong>: Provide system
                health status</p>
                <p><strong>Endpoints</strong>:</p>
                <pre><code>GET /health
  Output: { status, components: { db, diskSpace, ... } }
  Auth: None required

GET /health/liveness
  Output: { status }
  Auth: None required

GET /health/readiness
  Output: { status, components: { db, ... } }
  Auth: None required</code></pre>
                <p><strong>Used By</strong>: - Koyeb health checks -
                Monitoring systems - Load balancers</p>
                <h2 id="authservice">AuthService</h2>
                <p><strong>Location</strong>:
                <code>src/main/java/com/stocks/stockease/service/AuthService.java</code></p>
                <p><strong>Responsibility</strong>: Authentication
                business logic</p>
                <p><strong>Methods</strong>:</p>
                <div class="sourceCode" id="cb7"><pre
                class="sourceCode java"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> UserDTO <span class="fu">register</span><span class="op">(</span>RegisterRequest request<span class="op">)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Validate <span class="fu">input</span> <span class="op">(</span>username<span class="op">,</span> email<span class="op">,</span> password<span class="op">)</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check username uniqueness</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Hash password with BCrypt</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Create User entity</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Save to database</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return UserDTO</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> LoginResponse <span class="fu">authenticate</span><span class="op">(</span><span class="bu">String</span> username<span class="op">,</span> <span class="bu">String</span> password<span class="op">)</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find user by username</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Verify password</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Generate JWT token</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return token <span class="op">+</span> user info</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> UserDTO <span class="fu">validateToken</span><span class="op">(</span><span class="bu">String</span> token<span class="op">)</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Parse JWT token</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Verify signature</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check expiration</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return user info</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">logout</span><span class="op">(</span><span class="bu">String</span> userId<span class="op">)</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Invalidate <span class="fu">token</span> <span class="op">(</span>future<span class="op">:</span> add to blacklist<span class="op">)</span></span></code></pre></div>
                <p><strong>Validation Rules</strong>: - Username: 3-50
                chars, alphanumeric + underscore - Email: valid email
                format - Password: 8+ chars, mixed case + numbers -
                Role: ADMIN or USER</p>
                <p><strong>Transactions</strong>: -
                <code>register()</code> - <span class="citation"
                data-cites="Transactional">@Transactional</span> -
                <code>authenticate()</code> - read-only -
                <code>validateToken()</code> - read-only</p>
                <h2 id="productservice">ProductService</h2>
                <p><strong>Location</strong>:
                <code>src/main/java/com/stocks/stockease/service/ProductService.java</code></p>
                <p><strong>Responsibility</strong>: Product business
                logic</p>
                <p><strong>Methods</strong>:</p>
                <div class="sourceCode" id="cb8"><pre
                class="sourceCode java"><code class="sourceCode java"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> Page<span class="op">&lt;</span>ProductDTO<span class="op">&gt;</span> <span class="fu">getProducts</span><span class="op">(</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> page<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="bu">String</span> sort<span class="op">,</span> <span class="bu">String</span> category<span class="op">)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Build dynamic query with filters</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Apply pagination</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Execute query</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="bu">Map</span> to DTOs</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return PageResponse</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ProductDTO <span class="fu">getProductById</span><span class="op">(</span><span class="bu">UUID</span> id<span class="op">)</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find product by ID</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return ProductDTO</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Throw EntityNotFoundException <span class="cf">if</span> not found</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ProductDTO <span class="fu">createProduct</span><span class="op">(</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    CreateProductRequest request<span class="op">,</span> <span class="bu">UUID</span> userId<span class="op">)</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Validate request</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check <span class="fu">authorization</span> <span class="op">(</span>ADMIN only<span class="op">)</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Verify SKU uniqueness</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Create Product entity</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> <span class="bu">Set</span> <span class="fu">metadata</span> <span class="op">(</span>createdAt<span class="op">,</span> createdBy<span class="op">)</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Save to database</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return ProductDTO</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ProductDTO <span class="fu">updateProduct</span><span class="op">(</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    <span class="bu">UUID</span> id<span class="op">,</span> UpdateProductRequest request<span class="op">,</span> <span class="bu">UUID</span> userId<span class="op">)</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find product by ID</span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Validate request</span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check <span class="fu">authorization</span> <span class="op">(</span>ADMIN only<span class="op">)</span></span>
<span id="cb8-29"><a href="#cb8-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Update fields</span>
<span id="cb8-30"><a href="#cb8-30" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Save changes</span>
<span id="cb8-31"><a href="#cb8-31" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return updated ProductDTO</span>
<span id="cb8-32"><a href="#cb8-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-33"><a href="#cb8-33" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">deleteProduct</span><span class="op">(</span><span class="bu">UUID</span> id<span class="op">,</span> <span class="bu">UUID</span> userId<span class="op">)</span></span>
<span id="cb8-34"><a href="#cb8-34" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Find product by ID</span>
<span id="cb8-35"><a href="#cb8-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check <span class="fu">authorization</span> <span class="op">(</span>ADMIN only<span class="op">)</span></span>
<span id="cb8-36"><a href="#cb8-36" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Delete from database</span></code></pre></div>
                <p><strong>Validation Rules</strong>: - Name: 3-255
                chars, not blank - Price: &gt; 0, max 999,999.99 -
                Quantity: &gt;= 0, max 1,000,000 - SKU: 3-50 chars,
                alphanumeric + hyphens, unique - Category: alphanumeric
                + spaces</p>
                <p><strong>Transactions</strong>: -
                <code>createProduct()</code> - <span class="citation"
                data-cites="Transactional">@Transactional</span> -
                <code>updateProduct()</code> - <span class="citation"
                data-cites="Transactional">@Transactional</span> -
                <code>deleteProduct()</code> - <span class="citation"
                data-cites="Transactional">@Transactional</span> -
                <code>getProducts()</code> - read-only -
                <code>getProductById()</code> - read-only</p>
                <h2 id="healthservice">HealthService</h2>
                <p><strong>Location</strong>:
                <code>src/main/java/com/stocks/stockease/service/HealthService.java</code></p>
                <p><strong>Responsibility</strong>: System health
                checks</p>
                <p><strong>Methods</strong>:</p>
                <div class="sourceCode" id="cb9"><pre
                class="sourceCode java"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> HealthStatus <span class="fu">getHealth</span><span class="op">()</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check database connectivity</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check disk space</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Check memory usage</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return aggregated status</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isDatabaseHealthy</span><span class="op">()</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Execute test query<span class="op">:</span> SELECT <span class="dv">1</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return <span class="kw">true</span> <span class="cf">if</span> successful</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="op">-</span> Return <span class="kw">false</span> <span class="cf">if</span> connection fails</span></code></pre></div>
                <p><strong>Health Components</strong>: - <code>db</code>
                - Database connectivity - <code>diskSpace</code> -
                Available disk space - <code>livenessState</code> -
                Application running - <code>readinessState</code> -
                Ready to accept requests</p>
                <h2 id="repository-interfaces">Repository
                Interfaces</h2>
                <h3 id="userrepository">UserRepository</h3>
                <div class="sourceCode" id="cb10"><pre
                class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> UserRepository <span class="kw">extends</span> JpaRepository<span class="op">&lt;</span>User<span class="op">,</span> <span class="bu">UUID</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    Optional<span class="op">&lt;</span>User<span class="op">&gt;</span> <span class="fu">findByUsername</span><span class="op">(</span><span class="bu">String</span> username<span class="op">);</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    Optional<span class="op">&lt;</span>User<span class="op">&gt;</span> <span class="fu">findByEmail</span><span class="op">(</span><span class="bu">String</span> email<span class="op">);</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">boolean</span> <span class="fu">existsByUsername</span><span class="op">(</span><span class="bu">String</span> username<span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
                <h3 id="productrepository">ProductRepository</h3>
                <div class="sourceCode" id="cb11"><pre
                class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> ProductRepository <span class="kw">extends</span> JpaRepository<span class="op">&lt;</span>Product<span class="op">,</span> <span class="bu">UUID</span><span class="op">&gt;</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    Optional<span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findBySku</span><span class="op">(</span><span class="bu">String</span> sku<span class="op">);</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    Page<span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findByCategory</span><span class="op">(</span><span class="bu">String</span> category<span class="op">,</span> <span class="bu">Pageable</span> pageable<span class="op">);</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findByCreatedBy</span><span class="op">(</span><span class="bu">UUID</span> userId<span class="op">);</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">@Query</span><span class="op">(</span><span class="st">&quot;SELECT p FROM Product p WHERE p.price &gt; ?1 AND p.quantity &gt; 0&quot;</span><span class="op">)</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">List</span><span class="op">&lt;</span>Product<span class="op">&gt;</span> <span class="fu">findAffordableInStock</span><span class="op">(</span><span class="bu">BigDecimal</span> maxPrice<span class="op">);</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
                <h2 id="exception-handling">Exception Handling</h2>
                <p><strong>Custom Exceptions</strong>: -
                <code>ValidationException</code> â†’ 400 Bad Request -
                <code>AuthenticationException</code> â†’ 401 Unauthorized
                - <code>AuthorizationException</code> â†’ 403 Forbidden -
                <code>EntityNotFoundException</code> â†’ 404 Not Found -
                <code>InternalServerException</code> â†’ 500 Internal
                Server Error</p>
                <p><strong>Global Exception Handler</strong>: -
                <code>@RestControllerAdvice</code> catches exceptions -
                Formats error responses - Sets appropriate HTTP status
                codes - Logs errors for debugging</p>
                <h2 id="component-dependencies-graph">Component
                Dependencies Graph</h2>
                <pre><code>HealthController
  â””â”€â”€ HealthService
      â””â”€â”€ Database connection

AuthController
  â””â”€â”€ AuthService
      â”œâ”€â”€ UserRepository
      â”œâ”€â”€ PasswordEncoder
      â””â”€â”€ JwtUtil

ProductController
  â”œâ”€â”€ ProductService
  â”‚   â”œâ”€â”€ ProductRepository
  â”‚   â”œâ”€â”€ UserRepository (authorization)
  â”‚   â””â”€â”€ Validators
  â””â”€â”€ SecurityContext

SecurityConfig
  â”œâ”€â”€ JwtFilter
  â”œâ”€â”€ PasswordEncoder (BCrypt)
  â””â”€â”€ CustomUserDetailsService</code></pre>
                <hr />
                <p><strong>Document Version</strong>: 1.0<br />
                <strong>Last Updated</strong>: October 31, 2025<br />
                <strong>Status</strong>: Production Ready</p>
            </div>
        </main>
    </div>

    <footer>
        <div class="footer-content">
            <p><strong>StockEase</strong> - Inventory Management System</p>
            <p>Architecture Documentation | Generated with Enterprise Standards</p>
            <p style="opacity: 0.7; font-size: 0.85rem;">Â© 2025 Team StockEase. All rights reserved.</p>
        </div>
    </footer>
    <!-- Sidebar Navigation Script
    // ====================================================================
        // SIDEBAR NAVIGATION MODULE
        // ====================================================================
        // Dynamically builds navigation sidebar based on static navigation
        // object. Highlights current page based on window.location.pathname.
        // 
        // Features:
        //   - Dynamic menu generation (no need to update HTML)
        //   - Active state highlighting (bold + background color)
        //   - Relative path calculation for nested pages (../../../templates)
        //   - Architecture root detection for consistent navigation
        // ====================================================================
        
        // Calculate relative path to architecture root based on current location
    -->
    <script>
        function getArchRoot() {
            const path = window.location.pathname;
            const segments = path.split('/').filter(s => s);
            
            // Find how many levels deep we are from 'architecture' folder
            const archIndex = segments.indexOf('architecture');
            if (archIndex === -1) return './';
            
            const depth = segments.length - archIndex - 2; // -2 for architecture and filename
            if (depth <= 0) return './';
            
            return '../'.repeat(depth);
        }

        // Navigation Menu (paths relative to architecture root)
        const navigation = {
            'API Documentation': [
                { label: 'Overview', href: 'api-docs.html', isApiDoc: true },
            ],
            'Architecture': [
                { label: 'Overview', href: 'overview.html' },
                { label: 'System Layers', href: 'layers.html' },
                { label: 'Backend Architecture', href: 'backend.html' },
                { label: 'Frontend Architecture', href: 'frontend.html' },
                { label: 'Security Architecture', href: 'security.html' },
                { label: 'Deployment Strategy', href: 'deployment.html' },
            ],
            'Design Decisions': [
                { label: 'Index', href: 'decisions/index.html' },
            ],
            'Components': [
                { label: 'Index', href: 'components/index.html' },
                { label: 'Analytics Service', href: 'components/analytics-service.html' },
                { label: 'Supplier Controller', href: 'components/supplier-controller.html' },
            ],
            'Patterns': [
                { label: 'Index', href: 'patterns/index.html' },
                { label: 'Repository Pattern', href: 'patterns/repository-pattern.html' },
                { label: 'Security Patterns', href: 'patterns/security-patterns.html' },
            ],
            'Testing': [
                { label: 'Architecture', href: 'testing-architecture.html' },
                { label: 'Test Pyramid', href: 'testing/pyramid.html' },
                { label: 'Strategy', href: 'testing/strategy.html' },
                { label: 'Spring Slices', href: 'testing/spring-slices.html' },
                { label: 'Test Data Fixtures', href: 'testing/test-data-fixtures.html' },
                { label: 'Security Tests', href: 'testing/security-tests.html' },
                { label: 'Naming Conventions', href: 'testing/naming-conventions.html' },
                { label: 'Test Matrix', href: 'testing/matrix.html' },
                { label: 'Coverage & Quality', href: 'testing/coverage-and-quality.html' },
                { label: 'Controller Integration', href: 'testing/controller-integration.html' },
                { label: 'CI Pipeline Tests', href: 'testing/ci-pipeline-tests.html' },
            ],
            'Deployment': [
                { label: 'Overview', href: 'deployment.html' },
                { label: 'CI/CD Pipeline', href: 'deployment/ci-pipeline.html' },
                { label: 'Docker Strategy', href: 'deployment/docker-strategy.html' },
                { label: 'Staging Config', href: 'deployment/staging-config.html' },
            ],
            'Reference': [
                { label: 'Documentation Guide', href: 'DOCUMENTATION-GUIDE.html' },
                { label: 'HTML Generation', href: 'DOCUMENTATION-GENERATION.html' },
                { label: 'Redundancy Analysis', href: 'REDUNDANCY-ANALYSIS.html' },
            ],
        };

        // Build sidebar
        function buildSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (!sidebar) return;

            const archRoot = getArchRoot();

            Object.entries(navigation).forEach(([section, links]) => {
                const navSection = document.createElement('div');
                navSection.className = 'nav-section';

                const title = document.createElement('div');
                title.className = 'nav-section-title';
                title.textContent = section;
                navSection.appendChild(title);

                const ul = document.createElement('ul');
                links.forEach(link => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    
                    // For API docs, go up to docs root; otherwise use architecture root
                    if (link.isApiDoc) {
                        a.href = archRoot + '../' + link.href;
                    } else {
                        a.href = archRoot + link.href;
                    }
                    
                    a.textContent = link.label;

                    // Highlight current page
                    const currentPath = window.location.pathname;
                    const linkPath = link.href.replace('.html', '');
                    if (currentPath.endsWith(link.href) || currentPath.includes(linkPath)) {
                        a.className = 'active';
                    }

                    li.appendChild(a);
                    ul.appendChild(li);
                });

                navSection.appendChild(ul);
                sidebar.appendChild(navSection);
            });
        }

        // Build table of contents highlight
        function initTableOfContents() {
            const tocLinks = document.querySelectorAll('nav.toc a');
            const headings = document.querySelectorAll('h2, h3');

            window.addEventListener('scroll', () => {
                let currentHeading = null;
                headings.forEach(heading => {
                    if (heading.getBoundingClientRect().top <= 100) {
                        currentHeading = heading;
                    }
                });

                tocLinks.forEach(link => {
                    link.classList.remove('active');
                    if (currentHeading) {
                        const href = link.getAttribute('href');
                        if (href === '#' + currentHeading.id) {
                            link.classList.add('active');
                        }
                    }
                });
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            buildSidebar();
            initTableOfContents();
        });
    </script>

    <!-- Mermaid.js for diagram rendering 
     // ====================================================================
        // MERMAID DIAGRAM RENDERING MODULE
        // ====================================================================
        // Renders architecture diagrams using Mermaid.js v10.
        // 
        // Diagram Source: Markdown files contain ```mermaid code fences
        // Processing Pipeline:
        //   1. Markdown (``` mermaid ... ```)
        //   2. Pandoc Lua filter converts to <div class="mermaid">content</div>
        //   3. This script imports mermaid.js and calls mermaid.run()
        //   4. Mermaid.js renders SVG diagrams in-place
        // 
        // Supported Diagram Types:
        //   - Flowcharts (graph/digraph)
        //   - Sequence diagrams
        //   - Class diagrams
        //   - State diagrams
        //   - Deployment diagrams
        // 
        // Security: securityLevel: 'loose' allows HTML in diagram labels
        // Styling: Applied via enterprise-docs.css (.mermaid styles)
        // 
        // Browser Support: All modern browsers with ES Module support
        // CDN: https://cdn.jsdelivr.net/npm/mermaid@10/
        // ====================================================================
    -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
        });
        
        // Look for mermaid divs that were generated by Pandoc Lua filter
        const mermaidDivs = document.querySelectorAll('div.mermaid');
        
        mermaidDivs.forEach((div) => {
            // Verify mermaid content is present
            if (div.textContent.trim()) {
                // Content is ready for rendering
            }
        });
        
        // Also look for any code.language-mermaid blocks (fallback for compatibility)
        const codeMermaidBlocks = document.querySelectorAll('code.language-mermaid');
        
        codeMermaidBlocks.forEach((code) => {
            code.classList.remove('language-mermaid');
            code.classList.add('mermaid');
            // If wrapped in pre, mark pre as mermaid too
            if (code.parentElement.tagName === 'PRE') {
                code.parentElement.classList.add('mermaid-block');
            }
        });
        
        // Wait for DOM to be fully loaded, then render all mermaid diagrams
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    await mermaid.run();
                } catch (err) {
                    console.error('Mermaid rendering error:', err);
                }
            });
        } else {
            // Already loaded
            mermaid.run().catch(err => {
                console.error('Mermaid rendering error:', err);
            });
        }
    </script>
</body>
</html>
