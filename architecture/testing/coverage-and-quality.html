<!--
================================================================================
                    STOCKEASE ENTERPRISE DOCUMENTATION TEMPLATE
================================================================================

File: enterprise-docs.html
Purpose: 
  Professional HTML template for generating enterprise-grade architecture 
  documentation using Pandoc. Used by the docs-pipeline.yml GitHub Actions
  workflow to convert markdown to styled HTML with sidebar navigation and
  mermaid diagram support.

Template Engine: Pandoc (pandoc.org)
  - Variables: , <h1 id="coverage-quality">Coverage &amp; Quality</h1>
<p><strong>Purpose</strong>: Document JaCoCo coverage configuration,
thresholds, and quality metrics for StockEase tests.</p>
<hr />
<h2 id="table-of-contents">Table of Contents</h2>
<ol type="1">
<li><a href="#jacoco-overview">JaCoCo Overview</a></li>
<li><a href="#coverage-thresholds">Coverage Thresholds</a></li>
<li><a href="#coverage-matrix">Coverage Matrix</a></li>
<li><a href="#running-coverage-reports">Running Coverage
Reports</a></li>
<li><a href="#must-cover-classes">Must-Cover Classes</a></li>
<li><a href="#quality-gates">Quality Gates</a></li>
<li><a href="#related-documentation">Related Documentation</a></li>
</ol>
<hr />
<h2 id="jacoco-overview">JaCoCo Overview</h2>
<h3 id="what-is-jacoco">What is JaCoCo?</h3>
<p>JaCoCo (Java Code Coverage) measures which lines of code are executed
during tests.</p>
<pre><code>Production Code
‚îú‚îÄ‚îÄ Line A: Executed ‚úÖ  
‚îú‚îÄ‚îÄ Line B: Executed ‚úÖ  
‚îî‚îÄ‚îÄ Line C: NOT executed ‚ùå  

Coverage = 2/3 = 66.7%</code></pre>
<h3 id="coverage-types">Coverage Types</h3>
<table>
<colgroup>
<col style="width: 23%" />
<col style="width: 42%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="header">
<th>Type</th>
<th>Definition</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Line Coverage</strong></td>
<td>% of lines executed</td>
<td>70 out of 100 lines = 70%</td>
</tr>
<tr class="even">
<td><strong>Branch Coverage</strong></td>
<td>% of if/else paths taken</td>
<td>30 out of 50 branches = 60%</td>
</tr>
<tr class="odd">
<td><strong>Method Coverage</strong></td>
<td>% of methods called</td>
<td>45 out of 50 methods = 90%</td>
</tr>
<tr class="even">
<td><strong>Class Coverage</strong></td>
<td>% of classes tested</td>
<td>8 out of 10 classes = 80%</td>
</tr>
</tbody>
</table>
<h3 id="current-jacoco-status-in-stockease">Current JaCoCo Status in
StockEase</h3>
<ul>
<li><strong>Status</strong>: Ready to configure (not yet in
pom.xml)</li>
<li><strong>Recommendation</strong>: Add to pom.xml before first CI/CD
build</li>
<li><strong>Target</strong>: 70% line, 60% branch for controllers</li>
</ul>
<hr />
<h2 id="coverage-thresholds">Coverage Thresholds</h2>
<h3 id="recommended-thresholds-by-layer">Recommended Thresholds by
Layer</h3>
<table style="width:100%;">
<colgroup>
<col style="width: 36%" />
<col style="width: 20%" />
<col style="width: 26%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="header">
<th>Component</th>
<th>Line</th>
<th>Branch</th>
<th>Why</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Controllers</strong></td>
<td>80%</td>
<td>70%</td>
<td>Critical path, test all paths</td>
</tr>
<tr class="even">
<td><strong>Services</strong></td>
<td>75%</td>
<td>60%</td>
<td>Business logic, test main cases</td>
</tr>
<tr class="odd">
<td><strong>Utilities</strong></td>
<td>80%</td>
<td>75%</td>
<td>Reusable code, cover edge cases</td>
</tr>
<tr class="even">
<td><strong>Repositories</strong></td>
<td>60%</td>
<td>50%</td>
<td>Usually mocked; <span class="citation"
data-cites="DataJpaTest">@DataJpaTest</span> coverage if needed</td>
</tr>
<tr class="odd">
<td><strong>Entities</strong></td>
<td>40%</td>
<td>30%</td>
<td>Mostly getters/setters</td>
</tr>
<tr class="even">
<td><strong>Config</strong></td>
<td>50%</td>
<td>40%</td>
<td>Usually tested indirectly</td>
</tr>
</tbody>
</table>
<h3 id="proposed-stockease-thresholds">Proposed StockEase
Thresholds</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- pom.xml (to be added) --&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.jacoco&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;jacoco-maven-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">version</span>&gt;0.8.11&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">configuration</span>&gt;</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">rules</span>&gt;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">rule</span>&gt;</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">element</span>&gt;BUNDLE&lt;/<span class="kw">element</span>&gt;</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">includes</span>&gt;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">include</span>&gt;com.stocks.stockease.controller.*&lt;/<span class="kw">include</span>&gt;</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">includes</span>&gt;</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">limits</span>&gt;</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">limit</span>&gt;</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">counter</span>&gt;LINE&lt;/<span class="kw">counter</span>&gt;</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">value</span>&gt;COVEREDRATIO&lt;/<span class="kw">value</span>&gt;</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">minimum</span>&gt;0.70&lt;/<span class="kw">minimum</span>&gt;  <span class="co">&lt;!-- 70% --&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">limit</span>&gt;</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">limit</span>&gt;</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">counter</span>&gt;BRANCH&lt;/<span class="kw">counter</span>&gt;</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">value</span>&gt;COVEREDRATIO&lt;/<span class="kw">value</span>&gt;</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">minimum</span>&gt;0.60&lt;/<span class="kw">minimum</span>&gt;  <span class="co">&lt;!-- 60% --&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">limit</span>&gt;</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">limits</span>&gt;</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">rule</span>&gt;</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">rules</span>&gt;</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">configuration</span>&gt;</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">plugin</span>&gt;</span></code></pre></div>
<hr />
<h2 id="coverage-matrix">Coverage Matrix</h2>
<h3 id="current-coverage-estimated">Current Coverage (Estimated)</h3>
<table>
<thead>
<tr class="header">
<th>Package</th>
<th>Classes</th>
<th>Tests</th>
<th>Coverage</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Controller</strong></td>
<td>2</td>
<td>8</td>
<td>~85%</td>
<td>‚úÖ Good</td>
</tr>
<tr class="even">
<td><strong>Security</strong></td>
<td>2</td>
<td>~7*</td>
<td>~75%</td>
<td>‚úÖ Good</td>
</tr>
<tr class="odd">
<td><strong>Config</strong></td>
<td>1</td>
<td>1</td>
<td>~50%</td>
<td>üü° Adequate</td>
</tr>
<tr class="even">
<td><strong>Model</strong></td>
<td>2</td>
<td>0</td>
<td>~30%</td>
<td>‚ùå Low</td>
</tr>
<tr class="odd">
<td><strong>Repository</strong></td>
<td>1</td>
<td>0</td>
<td>~0%</td>
<td>‚ùå Low (Mocked)</td>
</tr>
<tr class="even">
<td><strong>TOTAL</strong></td>
<td><strong>8</strong></td>
<td><strong>9</strong></td>
<td><strong>~55%</strong></td>
<td>üü° Acceptable</td>
</tr>
</tbody>
</table>
<p>*Security tests distributed across controller tests</p>
<h3 id="coverage-by-feature">Coverage by Feature</h3>
<table>
<thead>
<tr class="header">
<th>Feature</th>
<th>Component</th>
<th>Coverage</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Authentication</strong></td>
<td>AuthController, JwtUtil</td>
<td>85%</td>
<td>‚úÖ Tested</td>
</tr>
<tr class="even">
<td><strong>Product CRUD</strong></td>
<td>ProductController</td>
<td>90%</td>
<td>‚úÖ Tested</td>
</tr>
<tr class="odd">
<td><strong>Authorization</strong></td>
<td>SecurityConfig, Filters</td>
<td>70%</td>
<td>‚úÖ Tested</td>
</tr>
<tr class="even">
<td><strong>Validation</strong></td>
<td>Controllers</td>
<td>60%</td>
<td>üü° Partial</td>
</tr>
<tr class="odd">
<td><strong>Entities</strong></td>
<td>Product, User</td>
<td>30%</td>
<td>‚ùå Minimal</td>
</tr>
<tr class="even">
<td><strong>Repositories</strong></td>
<td>ProductRepository</td>
<td>0%</td>
<td>‚ùå Mocked</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="running-coverage-reports">Running Coverage Reports</h2>
<h3 id="generate-coverage-report">Generate Coverage Report</h3>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> backend</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: Full test + coverage</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean test jacoco:report</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: Skip unit tests, only coverage</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean jacoco:report</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 3: With specific JDK</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> <span class="at">-DjavaHome</span><span class="op">=</span>/path/to/jdk17 clean test jacoco:report</span></code></pre></div>
<h3 id="view-html-report">View HTML Report</h3>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># After running above, open:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span> backend/target/site/jacoco/index.html</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On Windows:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">start</span> backend<span class="dt">\t</span>arget<span class="dt">\s</span>ite<span class="dt">\j</span>acoco<span class="dt">\i</span>ndex.html</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Report shows:</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># - Overall coverage percentage</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># - Package breakdown</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># - Class coverage details</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># - Line-by-line code view (green/yellow/red)</span></span></code></pre></div>
<h3 id="report-structure">Report Structure</h3>
<pre><code>index.html                   ‚Üê Start here (overall stats)
‚îú‚îÄ‚îÄ com.stocks.stockease.controller
‚îÇ   ‚îú‚îÄ‚îÄ AuthController.java.html
‚îÇ   ‚îî‚îÄ‚îÄ ProductController.java.html
‚îú‚îÄ‚îÄ com.stocks.stockease.security
‚îÇ   ‚îú‚îÄ‚îÄ JwtUtil.java.html
‚îÇ   ‚îî‚îÄ‚îÄ SecurityConfig.java.html
‚îú‚îÄ‚îÄ com.stocks.stockease.model
‚îÇ   ‚îú‚îÄ‚îÄ Product.java.html
‚îÇ   ‚îî‚îÄ‚îÄ User.java.html
‚îî‚îÄ‚îÄ [more packages...]</code></pre>
<h3 id="report-interpretation">Report Interpretation</h3>
<pre><code>Line Coverage: 87% (261/300)
‚îú‚îÄ Green (261): Executed by tests ‚úÖ
‚îú‚îÄ Yellow (20): Partially executed (one branch missed)
‚îî‚îÄ Red (19): Not executed by tests ‚ùå

Branch Coverage: 72% (80/111)
‚îú‚îÄ All branches of if/else tested
‚îî‚îÄ Some edge cases not covered</code></pre>
<hr />
<h2 id="must-cover-classes">Must-Cover Classes</h2>
<h3 id="critical-path-100-coverage-target">Critical Path (100% Coverage
Target)</h3>
<p>These classes implement core business logic and must be thoroughly
tested:</p>
<table>
<thead>
<tr class="header">
<th>Class</th>
<th>File</th>
<th>Why Critical</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>AuthController</code></td>
<td>controller/</td>
<td>Handles all auth flows</td>
<td>95%</td>
</tr>
<tr class="even">
<td><code>ProductController</code></td>
<td>controller/</td>
<td>Handles all product ops</td>
<td>95%</td>
</tr>
<tr class="odd">
<td><code>JwtUtil</code></td>
<td>security/</td>
<td>Token validation, generation</td>
<td>90%</td>
</tr>
<tr class="even">
<td><code>SecurityConfig</code></td>
<td>security/</td>
<td>Spring Security setup</td>
<td>80%</td>
</tr>
</tbody>
</table>
<h3 id="standard-path-70-80-coverage-target">Standard Path (70-80%
Coverage Target)</h3>
<p>Implement business logic but less critical:</p>
<table>
<thead>
<tr class="header">
<th>Class</th>
<th>File</th>
<th>Why</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>UserRepository</code></td>
<td>repository/</td>
<td>Data access (mocked)</td>
<td>60%*</td>
</tr>
<tr class="even">
<td><code>ProductRepository</code></td>
<td>repository/</td>
<td>Data access (mocked)</td>
<td>60%*</td>
</tr>
<tr class="odd">
<td><code>AuthenticationManager</code></td>
<td>config/</td>
<td>Spring config</td>
<td>70%</td>
</tr>
</tbody>
</table>
<p>*Repository coverage through integration tests, not unit tests</p>
<h3 id="optional-40-60-coverage-target">Optional (40-60% Coverage
Target)</h3>
<p>Helper classes, models, or less critical paths:</p>
<table>
<thead>
<tr class="header">
<th>Class</th>
<th>File</th>
<th>Why</th>
<th>Target</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Product</code></td>
<td>model/</td>
<td>Entity (getters/setters)</td>
<td>50%</td>
</tr>
<tr class="even">
<td><code>User</code></td>
<td>model/</td>
<td>Entity (getters/setters)</td>
<td>50%</td>
</tr>
<tr class="odd">
<td><code>HealthController</code></td>
<td>controller/</td>
<td>Non-critical endpoint</td>
<td>60%</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="quality-gates">Quality Gates</h2>
<h3 id="build-time-gates-cicd">Build-Time Gates (CI/CD)</h3>
<div class="sourceCode" id="cb7"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In GitHub Actions (.github/workflows/ci-build.yml)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests with coverage</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> mvn clean test jacoco:report</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check coverage thresholds</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">  run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    # Fail if coverage &lt; 70% for controllers</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    mvn jacoco:check -Djacoco.minimum=0.70</span></code></pre></div>
<h3 id="coverage-based-decisions">Coverage-Based Decisions</h3>
<table>
<thead>
<tr class="header">
<th>Coverage</th>
<th>Decision</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>&lt; 50%</strong></td>
<td>Critical</td>
<td>‚ùå Block merge, add tests</td>
</tr>
<tr class="even">
<td><strong>50-70%</strong></td>
<td>Warning</td>
<td>‚ö†Ô∏è Request review, optional tests</td>
</tr>
<tr class="odd">
<td><strong>70-85%</strong></td>
<td>Good</td>
<td>‚úÖ Approve, monitor drift</td>
</tr>
<tr class="even">
<td><strong>85%+</strong></td>
<td>Excellent</td>
<td>‚úÖ Approve, consider diminishing returns</td>
</tr>
</tbody>
</table>
<h3 id="regression-prevention">Regression Prevention</h3>
<div class="sourceCode" id="cb8"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare coverage to previous build</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> jacoco:report</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If coverage decreased:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Don&#39;t merge without explanation</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Add tests for new/changed code</span></span></code></pre></div>
<hr />
<h2 id="improving-coverage">Improving Coverage</h2>
<h3 id="step-1-identify-uncovered-code">Step 1: Identify Uncovered
Code</h3>
<div class="sourceCode" id="cb9"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># After running: mvn clean test jacoco:report</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Open: backend/target/site/jacoco/index.html</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Click on class ‚Üí scroll to red lines</span></span></code></pre></div>
<h3 id="step-2-write-tests-for-uncovered-lines">Step 2: Write Tests for
Uncovered Lines</h3>
<div class="sourceCode" id="cb10"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ‚ùå Uncovered code</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>product<span class="op">.</span><span class="fu">getQuantity</span><span class="op">()</span> <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// This branch never tested</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    log<span class="op">.</span><span class="fu">warn</span><span class="op">(</span><span class="st">&quot;Low stock warning&quot;</span><span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">// ‚úÖ Add test</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">testLowStockWarning</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    Product product <span class="op">=</span> <span class="kw">new</span> <span class="fu">Product</span><span class="op">(</span><span class="st">&quot;Test&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">100.0</span><span class="op">);</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    mockMvc<span class="op">.</span><span class="fu">perform</span><span class="op">(</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;/api/products/1&quot;</span><span class="op">))</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">andExpect</span><span class="op">(</span><span class="fu">status</span><span class="op">().</span><span class="fu">isOk</span><span class="op">());</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Now warning branch is covered</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="step-3-run-verification">Step 3: Run Verification</h3>
<div class="sourceCode" id="cb11"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean test jacoco:report</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check index.html to confirm coverage improved</span></span></code></pre></div>
<h3 id="step-4-set-coverage-gate-prevent-regression">Step 4: Set
Coverage Gate (Prevent Regression)</h3>
<div class="sourceCode" id="cb12"><pre
class="sourceCode xml"><code class="sourceCode xml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- pom.xml --&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.jacoco&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;jacoco-maven-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">configuration</span>&gt;</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">rules</span>&gt;</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">rule</span>&gt;</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">element</span>&gt;BUNDLE&lt;/<span class="kw">element</span>&gt;</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">limits</span>&gt;</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">limit</span>&gt;</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">counter</span>&gt;LINE&lt;/<span class="kw">counter</span>&gt;</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">value</span>&gt;COVEREDRATIO&lt;/<span class="kw">value</span>&gt;</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">minimum</span>&gt;0.70&lt;/<span class="kw">minimum</span>&gt;</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">limit</span>&gt;</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">limits</span>&gt;</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">excludes</span>&gt;</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">exclude</span>&gt;**/config/AppConfig.class&lt;/<span class="kw">exclude</span>&gt;</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">exclude</span>&gt;**/model/*.class&lt;/<span class="kw">exclude</span>&gt;</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">excludes</span>&gt;</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">rule</span>&gt;</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">rules</span>&gt;</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">configuration</span>&gt;</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">executions</span>&gt;</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">execution</span>&gt;</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">goals</span>&gt;</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">goal</span>&gt;check&lt;/<span class="kw">goal</span>&gt;  <span class="co">&lt;!-- Fails build if threshold not met --&gt;</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">goals</span>&gt;</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">execution</span>&gt;</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">executions</span>&gt;</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">plugin</span>&gt;</span></code></pre></div>
<hr />
<h2 id="coverage-reports-in-cicd">Coverage Reports in CI/CD</h2>
<h3 id="artifact-upload-github-actions">Artifact Upload (GitHub
Actions)</h3>
<div class="sourceCode" id="cb13"><pre
class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .github/workflows/ci-build.yml</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Upload coverage report</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">if</span><span class="kw">:</span><span class="at"> always()</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> jacoco-report</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> backend/target/site/jacoco/</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Publish to GitHub Pages</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-pages-artifact@v2</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> backend/target/site/jacoco/</span></span></code></pre></div>
<h3 id="view-in-github-actions">View in GitHub Actions</h3>
<ol type="1">
<li>Go to Actions ‚Üí Recent build</li>
<li>Scroll to ‚ÄúArtifacts‚Äù section</li>
<li>Download <code>jacoco-report.zip</code></li>
<li>Extract and open <code>index.html</code> in browser</li>
</ol>
<h3 id="publish-to-github-pages">Publish to GitHub Pages</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># After merge to main, coverage report auto-publishes to:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://keglev.github.io/stockease/coverage/</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Link in README.md:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># [![Coverage](https://img.shields.io/badge/coverage-70%25-yellow)](https://keglev.github.io/stockease/coverage/)</span></span></code></pre></div>
<hr />
<h2 id="coverage-best-practices">Coverage Best Practices</h2>
<h3 id="do">‚úÖ Do</h3>
<ul>
<li>‚úÖ Test happy path (main flow)</li>
<li>‚úÖ Test error cases (exceptions)</li>
<li>‚úÖ Test authorization checks</li>
<li>‚úÖ Test boundary conditions (empty lists, null values)</li>
<li>‚úÖ Aim for 70%+ coverage on critical paths</li>
<li>‚úÖ Use mutation testing to validate test quality</li>
</ul>
<h3 id="dont">‚ùå Don‚Äôt</h3>
<ul>
<li>‚ùå Aim for 100% coverage (diminishing returns)</li>
<li>‚ùå Test generated code (getters/setters on entities)</li>
<li>‚ùå Test Spring Framework code (security, config)</li>
<li>‚ùå Write tests just to increase coverage (test quality matters)</li>
<li>‚ùå Lower thresholds to pass build (fix code instead)</li>
</ul>
<hr />
<h2 id="quality-metrics-dashboard-future">Quality Metrics Dashboard
(Future)</h2>
<h3 id="proposed-monitoring">Proposed Monitoring</h3>
<pre><code>Coverage Trends (Last 30 Days)

Line Coverage:     70% ‚Üí 72% ‚Üë (Good)
Branch Coverage:   60% ‚Üí 62% ‚Üë (Good)
Test Count:        9  ‚Üí 12 ‚Üë (Growing)
Execution Time:    25s ‚Üí 28s ‚Üì (Acceptable)

Top Uncovered Code:
1. Product.calculateDiscount() ‚Äî 0% (unused feature)
2. AuthService.refreshToken() ‚Äî 0% (future)
3. ValidationUtil.validateEmail() ‚Äî 0% (imported, unused)</code></pre>
<hr />
<h2 id="related-documentation">Related Documentation</h2>
<h3 id="testing-fundamentals">Testing Fundamentals</h3>
<ul>
<li><strong><a href="./strategy.html">Testing Strategy</a></strong> ‚Äî
Coverage goals</li>
<li><strong><a href="./pyramid.html">Test Pyramid</a></strong> ‚Äî
Distribution of test types</li>
<li><strong><a href="./ci-pipeline-tests.html">CI Pipeline
Tests</a></strong> ‚Äî Coverage in CI/CD</li>
</ul>
<h3 id="implementation">Implementation</h3>
<ul>
<li><strong><a href="./spring-slices.html">Spring Slices</a></strong> ‚Äî
How to write testable code</li>
<li><strong><a href="./controller-integration.html">Controller
Integration Tests</a></strong> ‚Äî HTTP test examples</li>
<li><strong><a href="./security-tests.html">Security Tests</a></strong>
‚Äî Authorization coverage</li>
</ul>
<h3 id="main-architecture">Main Architecture</h3>
<ul>
<li><strong><a href="../testing-architecture.html">Testing
Architecture</a></strong> ‚Äî Entry point</li>
<li><strong><a href="../backend.html">Backend Architecture</a></strong>
‚Äî Code being measured</li>
<li><strong><a href="../deployment.html">Deployment</a></strong> ‚Äî
Publishing reports</li>
</ul>
<hr />
<p><strong>Last Updated</strong>: October 31, 2025<br />
<strong>Version</strong>: 1.0<br />
<strong>Status</strong>: ‚úÖ Ready for implementation</p>
<p><a href="../testing-architecture.html">Back to Testing
Index</a></p> are substituted by Pandoc during generation
  - Standalone mode: --standalone flag ensures complete HTML output
  - Template variables documented: https://pandoc.org/MANUAL.html#templates

Key Features:
  ‚úì Responsive two-column layout (sidebar + content)
  ‚úì Professional styling via external enterprise-docs.css
  ‚úì Automatic sidebar navigation with active state highlighting
  ‚úì Mermaid.js v10 integration for architecture diagrams
  ‚úì Table of contents highlighting during scroll
  ‚úì Print-friendly styles
  ‚úì GitHub Pages compatible (absolute paths with /stockease/ root)

Browser Support: All modern browsers (Chrome, Firefox, Safari, Edge)
Accessibility: WCAG 2.1 AA compliant

Dependencies:
  - External CSS: /stockease/templates/enterprise-docs.css
  - Mermaid.js v10: https://cdn.jsdelivr.net/npm/mermaid@10/
  - Pandoc Lua Filter: /tmp/md-to-html-links.lua (converts mermaid blocks to divs)

Generated Files Location:
  - GitHub Pages: https://keglev.github.io/stockease/architecture/
  - Build Output: target/docs/architecture/ (before deployment)

Workflow Integration:
  1. docs-pipeline.yml: Runs Pandoc with this template + Lua filter
  2. Lua Filter: Converts mermaid code blocks to <div class="mermaid">
  3. Pandoc: Processes markdown with this template
  4. Output: Styled HTML in target/docs/architecture/
  5. Deployment: Published to GitHub Pages via gh-pages action

Last Updated: 2025-11-04
Version: 2.0 (CSS refactored to external file, mermaid rendering fixed)
================================================================================
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - StockEase Architecture Documentation</title>
    <link rel="stylesheet" href="/stockease/templates/enterprise-docs.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/stockease/index.html" class="logo">üìö StockEase Architecture Docs</a>
            <nav class="nav-breadcrumb">
                <a href="/stockease/index.html">Home</a> / <span id="breadcrumb">Documentation</span>
            </nav>
        </div>
    </header>

    <div class="container">
        <aside id="sidebar"></aside>
        <main>
            <div class="content">
                <h1 id="coverage-quality">Coverage &amp; Quality</h1>
                <p><strong>Purpose</strong>: Document JaCoCo coverage
                configuration, thresholds, and quality metrics for
                StockEase tests.</p>
                <hr />
                <h2 id="table-of-contents">Table of Contents</h2>
                <ol type="1">
                <li><a href="#jacoco-overview">JaCoCo Overview</a></li>
                <li><a href="#coverage-thresholds">Coverage
                Thresholds</a></li>
                <li><a href="#coverage-matrix">Coverage Matrix</a></li>
                <li><a href="#running-coverage-reports">Running Coverage
                Reports</a></li>
                <li><a href="#must-cover-classes">Must-Cover
                Classes</a></li>
                <li><a href="#quality-gates">Quality Gates</a></li>
                <li><a href="#related-documentation">Related
                Documentation</a></li>
                </ol>
                <hr />
                <h2 id="jacoco-overview">JaCoCo Overview</h2>
                <h3 id="what-is-jacoco">What is JaCoCo?</h3>
                <p>JaCoCo (Java Code Coverage) measures which lines of
                code are executed during tests.</p>
                <pre><code>Production Code
‚îú‚îÄ‚îÄ Line A: Executed ‚úÖ  
‚îú‚îÄ‚îÄ Line B: Executed ‚úÖ  
‚îî‚îÄ‚îÄ Line C: NOT executed ‚ùå  

Coverage = 2/3 = 66.7%</code></pre>
                <h3 id="coverage-types">Coverage Types</h3>
                <table>
                <colgroup>
                <col style="width: 23%" />
                <col style="width: 42%" />
                <col style="width: 34%" />
                </colgroup>
                <thead>
                <tr class="header">
                <th>Type</th>
                <th>Definition</th>
                <th>Example</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>Line Coverage</strong></td>
                <td>% of lines executed</td>
                <td>70 out of 100 lines = 70%</td>
                </tr>
                <tr class="even">
                <td><strong>Branch Coverage</strong></td>
                <td>% of if/else paths taken</td>
                <td>30 out of 50 branches = 60%</td>
                </tr>
                <tr class="odd">
                <td><strong>Method Coverage</strong></td>
                <td>% of methods called</td>
                <td>45 out of 50 methods = 90%</td>
                </tr>
                <tr class="even">
                <td><strong>Class Coverage</strong></td>
                <td>% of classes tested</td>
                <td>8 out of 10 classes = 80%</td>
                </tr>
                </tbody>
                </table>
                <h3 id="current-jacoco-status-in-stockease">Current
                JaCoCo Status in StockEase</h3>
                <ul>
                <li><strong>Status</strong>: Ready to configure (not yet
                in pom.xml)</li>
                <li><strong>Recommendation</strong>: Add to pom.xml
                before first CI/CD build</li>
                <li><strong>Target</strong>: 70% line, 60% branch for
                controllers</li>
                </ul>
                <hr />
                <h2 id="coverage-thresholds">Coverage Thresholds</h2>
                <h3 id="recommended-thresholds-by-layer">Recommended
                Thresholds by Layer</h3>
                <table style="width:100%;">
                <colgroup>
                <col style="width: 36%" />
                <col style="width: 20%" />
                <col style="width: 26%" />
                <col style="width: 16%" />
                </colgroup>
                <thead>
                <tr class="header">
                <th>Component</th>
                <th>Line</th>
                <th>Branch</th>
                <th>Why</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>Controllers</strong></td>
                <td>80%</td>
                <td>70%</td>
                <td>Critical path, test all paths</td>
                </tr>
                <tr class="even">
                <td><strong>Services</strong></td>
                <td>75%</td>
                <td>60%</td>
                <td>Business logic, test main cases</td>
                </tr>
                <tr class="odd">
                <td><strong>Utilities</strong></td>
                <td>80%</td>
                <td>75%</td>
                <td>Reusable code, cover edge cases</td>
                </tr>
                <tr class="even">
                <td><strong>Repositories</strong></td>
                <td>60%</td>
                <td>50%</td>
                <td>Usually mocked; <span class="citation"
                data-cites="DataJpaTest">@DataJpaTest</span> coverage if
                needed</td>
                </tr>
                <tr class="odd">
                <td><strong>Entities</strong></td>
                <td>40%</td>
                <td>30%</td>
                <td>Mostly getters/setters</td>
                </tr>
                <tr class="even">
                <td><strong>Config</strong></td>
                <td>50%</td>
                <td>40%</td>
                <td>Usually tested indirectly</td>
                </tr>
                </tbody>
                </table>
                <h3 id="proposed-stockease-thresholds">Proposed
                StockEase Thresholds</h3>
                <div class="sourceCode" id="cb2"><pre
                class="sourceCode xml"><code class="sourceCode xml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- pom.xml (to be added) --&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.jacoco&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;jacoco-maven-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">version</span>&gt;0.8.11&lt;/<span class="kw">version</span>&gt;</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">configuration</span>&gt;</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">rules</span>&gt;</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">rule</span>&gt;</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">element</span>&gt;BUNDLE&lt;/<span class="kw">element</span>&gt;</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">includes</span>&gt;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">include</span>&gt;com.stocks.stockease.controller.*&lt;/<span class="kw">include</span>&gt;</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">includes</span>&gt;</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">limits</span>&gt;</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">limit</span>&gt;</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">counter</span>&gt;LINE&lt;/<span class="kw">counter</span>&gt;</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">value</span>&gt;COVEREDRATIO&lt;/<span class="kw">value</span>&gt;</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">minimum</span>&gt;0.70&lt;/<span class="kw">minimum</span>&gt;  <span class="co">&lt;!-- 70% --&gt;</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">limit</span>&gt;</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">limit</span>&gt;</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">counter</span>&gt;BRANCH&lt;/<span class="kw">counter</span>&gt;</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">value</span>&gt;COVEREDRATIO&lt;/<span class="kw">value</span>&gt;</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">minimum</span>&gt;0.60&lt;/<span class="kw">minimum</span>&gt;  <span class="co">&lt;!-- 60% --&gt;</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">limit</span>&gt;</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">limits</span>&gt;</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">rule</span>&gt;</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">rules</span>&gt;</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">configuration</span>&gt;</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">plugin</span>&gt;</span></code></pre></div>
                <hr />
                <h2 id="coverage-matrix">Coverage Matrix</h2>
                <h3 id="current-coverage-estimated">Current Coverage
                (Estimated)</h3>
                <table>
                <thead>
                <tr class="header">
                <th>Package</th>
                <th>Classes</th>
                <th>Tests</th>
                <th>Coverage</th>
                <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>Controller</strong></td>
                <td>2</td>
                <td>8</td>
                <td>~85%</td>
                <td>‚úÖ Good</td>
                </tr>
                <tr class="even">
                <td><strong>Security</strong></td>
                <td>2</td>
                <td>~7*</td>
                <td>~75%</td>
                <td>‚úÖ Good</td>
                </tr>
                <tr class="odd">
                <td><strong>Config</strong></td>
                <td>1</td>
                <td>1</td>
                <td>~50%</td>
                <td>üü° Adequate</td>
                </tr>
                <tr class="even">
                <td><strong>Model</strong></td>
                <td>2</td>
                <td>0</td>
                <td>~30%</td>
                <td>‚ùå Low</td>
                </tr>
                <tr class="odd">
                <td><strong>Repository</strong></td>
                <td>1</td>
                <td>0</td>
                <td>~0%</td>
                <td>‚ùå Low (Mocked)</td>
                </tr>
                <tr class="even">
                <td><strong>TOTAL</strong></td>
                <td><strong>8</strong></td>
                <td><strong>9</strong></td>
                <td><strong>~55%</strong></td>
                <td>üü° Acceptable</td>
                </tr>
                </tbody>
                </table>
                <p>*Security tests distributed across controller
                tests</p>
                <h3 id="coverage-by-feature">Coverage by Feature</h3>
                <table>
                <thead>
                <tr class="header">
                <th>Feature</th>
                <th>Component</th>
                <th>Coverage</th>
                <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>Authentication</strong></td>
                <td>AuthController, JwtUtil</td>
                <td>85%</td>
                <td>‚úÖ Tested</td>
                </tr>
                <tr class="even">
                <td><strong>Product CRUD</strong></td>
                <td>ProductController</td>
                <td>90%</td>
                <td>‚úÖ Tested</td>
                </tr>
                <tr class="odd">
                <td><strong>Authorization</strong></td>
                <td>SecurityConfig, Filters</td>
                <td>70%</td>
                <td>‚úÖ Tested</td>
                </tr>
                <tr class="even">
                <td><strong>Validation</strong></td>
                <td>Controllers</td>
                <td>60%</td>
                <td>üü° Partial</td>
                </tr>
                <tr class="odd">
                <td><strong>Entities</strong></td>
                <td>Product, User</td>
                <td>30%</td>
                <td>‚ùå Minimal</td>
                </tr>
                <tr class="even">
                <td><strong>Repositories</strong></td>
                <td>ProductRepository</td>
                <td>0%</td>
                <td>‚ùå Mocked</td>
                </tr>
                </tbody>
                </table>
                <hr />
                <h2 id="running-coverage-reports">Running Coverage
                Reports</h2>
                <h3 id="generate-coverage-report">Generate Coverage
                Report</h3>
                <div class="sourceCode" id="cb3"><pre
                class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> backend</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1: Full test + coverage</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean test jacoco:report</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2: Skip unit tests, only coverage</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean jacoco:report</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 3: With specific JDK</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> <span class="at">-DjavaHome</span><span class="op">=</span>/path/to/jdk17 clean test jacoco:report</span></code></pre></div>
                <h3 id="view-html-report">View HTML Report</h3>
                <div class="sourceCode" id="cb4"><pre
                class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># After running above, open:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span> backend/target/site/jacoco/index.html</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On Windows:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="ex">start</span> backend<span class="dt">\t</span>arget<span class="dt">\s</span>ite<span class="dt">\j</span>acoco<span class="dt">\i</span>ndex.html</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Report shows:</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co"># - Overall coverage percentage</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># - Package breakdown</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># - Class coverage details</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co"># - Line-by-line code view (green/yellow/red)</span></span></code></pre></div>
                <h3 id="report-structure">Report Structure</h3>
                <pre><code>index.html                   ‚Üê Start here (overall stats)
‚îú‚îÄ‚îÄ com.stocks.stockease.controller
‚îÇ   ‚îú‚îÄ‚îÄ AuthController.java.html
‚îÇ   ‚îî‚îÄ‚îÄ ProductController.java.html
‚îú‚îÄ‚îÄ com.stocks.stockease.security
‚îÇ   ‚îú‚îÄ‚îÄ JwtUtil.java.html
‚îÇ   ‚îî‚îÄ‚îÄ SecurityConfig.java.html
‚îú‚îÄ‚îÄ com.stocks.stockease.model
‚îÇ   ‚îú‚îÄ‚îÄ Product.java.html
‚îÇ   ‚îî‚îÄ‚îÄ User.java.html
‚îî‚îÄ‚îÄ [more packages...]</code></pre>
                <h3 id="report-interpretation">Report
                Interpretation</h3>
                <pre><code>Line Coverage: 87% (261/300)
‚îú‚îÄ Green (261): Executed by tests ‚úÖ
‚îú‚îÄ Yellow (20): Partially executed (one branch missed)
‚îî‚îÄ Red (19): Not executed by tests ‚ùå

Branch Coverage: 72% (80/111)
‚îú‚îÄ All branches of if/else tested
‚îî‚îÄ Some edge cases not covered</code></pre>
                <hr />
                <h2 id="must-cover-classes">Must-Cover Classes</h2>
                <h3 id="critical-path-100-coverage-target">Critical Path
                (100% Coverage Target)</h3>
                <p>These classes implement core business logic and must
                be thoroughly tested:</p>
                <table>
                <thead>
                <tr class="header">
                <th>Class</th>
                <th>File</th>
                <th>Why Critical</th>
                <th>Target</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><code>AuthController</code></td>
                <td>controller/</td>
                <td>Handles all auth flows</td>
                <td>95%</td>
                </tr>
                <tr class="even">
                <td><code>ProductController</code></td>
                <td>controller/</td>
                <td>Handles all product ops</td>
                <td>95%</td>
                </tr>
                <tr class="odd">
                <td><code>JwtUtil</code></td>
                <td>security/</td>
                <td>Token validation, generation</td>
                <td>90%</td>
                </tr>
                <tr class="even">
                <td><code>SecurityConfig</code></td>
                <td>security/</td>
                <td>Spring Security setup</td>
                <td>80%</td>
                </tr>
                </tbody>
                </table>
                <h3 id="standard-path-70-80-coverage-target">Standard
                Path (70-80% Coverage Target)</h3>
                <p>Implement business logic but less critical:</p>
                <table>
                <thead>
                <tr class="header">
                <th>Class</th>
                <th>File</th>
                <th>Why</th>
                <th>Target</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><code>UserRepository</code></td>
                <td>repository/</td>
                <td>Data access (mocked)</td>
                <td>60%*</td>
                </tr>
                <tr class="even">
                <td><code>ProductRepository</code></td>
                <td>repository/</td>
                <td>Data access (mocked)</td>
                <td>60%*</td>
                </tr>
                <tr class="odd">
                <td><code>AuthenticationManager</code></td>
                <td>config/</td>
                <td>Spring config</td>
                <td>70%</td>
                </tr>
                </tbody>
                </table>
                <p>*Repository coverage through integration tests, not
                unit tests</p>
                <h3 id="optional-40-60-coverage-target">Optional (40-60%
                Coverage Target)</h3>
                <p>Helper classes, models, or less critical paths:</p>
                <table>
                <thead>
                <tr class="header">
                <th>Class</th>
                <th>File</th>
                <th>Why</th>
                <th>Target</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><code>Product</code></td>
                <td>model/</td>
                <td>Entity (getters/setters)</td>
                <td>50%</td>
                </tr>
                <tr class="even">
                <td><code>User</code></td>
                <td>model/</td>
                <td>Entity (getters/setters)</td>
                <td>50%</td>
                </tr>
                <tr class="odd">
                <td><code>HealthController</code></td>
                <td>controller/</td>
                <td>Non-critical endpoint</td>
                <td>60%</td>
                </tr>
                </tbody>
                </table>
                <hr />
                <h2 id="quality-gates">Quality Gates</h2>
                <h3 id="build-time-gates-cicd">Build-Time Gates
                (CI/CD)</h3>
                <div class="sourceCode" id="cb7"><pre
                class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># In GitHub Actions (.github/workflows/ci-build.yml)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Run tests with coverage</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">run</span><span class="kw">:</span><span class="at"> mvn clean test jacoco:report</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Check coverage thresholds</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">  run</span><span class="kw">: </span><span class="ch">|</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>    # Fail if coverage &lt; 70% for controllers</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    mvn jacoco:check -Djacoco.minimum=0.70</span></code></pre></div>
                <h3 id="coverage-based-decisions">Coverage-Based
                Decisions</h3>
                <table>
                <thead>
                <tr class="header">
                <th>Coverage</th>
                <th>Decision</th>
                <th>Action</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>&lt; 50%</strong></td>
                <td>Critical</td>
                <td>‚ùå Block merge, add tests</td>
                </tr>
                <tr class="even">
                <td><strong>50-70%</strong></td>
                <td>Warning</td>
                <td>‚ö†Ô∏è Request review, optional tests</td>
                </tr>
                <tr class="odd">
                <td><strong>70-85%</strong></td>
                <td>Good</td>
                <td>‚úÖ Approve, monitor drift</td>
                </tr>
                <tr class="even">
                <td><strong>85%+</strong></td>
                <td>Excellent</td>
                <td>‚úÖ Approve, consider diminishing returns</td>
                </tr>
                </tbody>
                </table>
                <h3 id="regression-prevention">Regression
                Prevention</h3>
                <div class="sourceCode" id="cb8"><pre
                class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compare coverage to previous build</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> jacoco:report</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="co"># If coverage decreased:</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="co"># - Don&#39;t merge without explanation</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="co"># - Add tests for new/changed code</span></span></code></pre></div>
                <hr />
                <h2 id="improving-coverage">Improving Coverage</h2>
                <h3 id="step-1-identify-uncovered-code">Step 1: Identify
                Uncovered Code</h3>
                <div class="sourceCode" id="cb9"><pre
                class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># After running: mvn clean test jacoco:report</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Open: backend/target/site/jacoco/index.html</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Click on class ‚Üí scroll to red lines</span></span></code></pre></div>
                <h3 id="step-2-write-tests-for-uncovered-lines">Step 2:
                Write Tests for Uncovered Lines</h3>
                <div class="sourceCode" id="cb10"><pre
                class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">// ‚ùå Uncovered code</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>product<span class="op">.</span><span class="fu">getQuantity</span><span class="op">()</span> <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// This branch never tested</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    log<span class="op">.</span><span class="fu">warn</span><span class="op">(</span><span class="st">&quot;Low stock warning&quot;</span><span class="op">);</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">// ‚úÖ Add test</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="at">@Test</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="fu">testLowStockWarning</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>    Product product <span class="op">=</span> <span class="kw">new</span> <span class="fu">Product</span><span class="op">(</span><span class="st">&quot;Test&quot;</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="fl">100.0</span><span class="op">);</span></span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    mockMvc<span class="op">.</span><span class="fu">perform</span><span class="op">(</span><span class="fu">get</span><span class="op">(</span><span class="st">&quot;/api/products/1&quot;</span><span class="op">))</span></span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">andExpect</span><span class="op">(</span><span class="fu">status</span><span class="op">().</span><span class="fu">isOk</span><span class="op">());</span></span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Now warning branch is covered</span></span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
                <h3 id="step-3-run-verification">Step 3: Run
                Verification</h3>
                <div class="sourceCode" id="cb11"><pre
                class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mvn</span> clean test jacoco:report</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check index.html to confirm coverage improved</span></span></code></pre></div>
                <h3
                id="step-4-set-coverage-gate-prevent-regression">Step 4:
                Set Coverage Gate (Prevent Regression)</h3>
                <div class="sourceCode" id="cb12"><pre
                class="sourceCode xml"><code class="sourceCode xml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- pom.xml --&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">plugin</span>&gt;</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">groupId</span>&gt;org.jacoco&lt;/<span class="kw">groupId</span>&gt;</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">artifactId</span>&gt;jacoco-maven-plugin&lt;/<span class="kw">artifactId</span>&gt;</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">configuration</span>&gt;</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">rules</span>&gt;</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">rule</span>&gt;</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">element</span>&gt;BUNDLE&lt;/<span class="kw">element</span>&gt;</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">limits</span>&gt;</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">limit</span>&gt;</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">counter</span>&gt;LINE&lt;/<span class="kw">counter</span>&gt;</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">value</span>&gt;COVEREDRATIO&lt;/<span class="kw">value</span>&gt;</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">minimum</span>&gt;0.70&lt;/<span class="kw">minimum</span>&gt;</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">limit</span>&gt;</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">limits</span>&gt;</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">excludes</span>&gt;</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">exclude</span>&gt;**/config/AppConfig.class&lt;/<span class="kw">exclude</span>&gt;</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">exclude</span>&gt;**/model/*.class&lt;/<span class="kw">exclude</span>&gt;</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">excludes</span>&gt;</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">rule</span>&gt;</span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">rules</span>&gt;</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">configuration</span>&gt;</span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">executions</span>&gt;</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">execution</span>&gt;</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">goals</span>&gt;</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">goal</span>&gt;check&lt;/<span class="kw">goal</span>&gt;  <span class="co">&lt;!-- Fails build if threshold not met --&gt;</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">goals</span>&gt;</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">execution</span>&gt;</span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">executions</span>&gt;</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">plugin</span>&gt;</span></code></pre></div>
                <hr />
                <h2 id="coverage-reports-in-cicd">Coverage Reports in
                CI/CD</h2>
                <h3 id="artifact-upload-github-actions">Artifact Upload
                (GitHub Actions)</h3>
                <div class="sourceCode" id="cb13"><pre
                class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># .github/workflows/ci-build.yml</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Upload coverage report</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-artifact@v3</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">if</span><span class="kw">:</span><span class="at"> always()</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">name</span><span class="kw">:</span><span class="at"> jacoco-report</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> backend/target/site/jacoco/</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> Publish to GitHub Pages</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">uses</span><span class="kw">:</span><span class="at"> actions/upload-pages-artifact@v2</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">with</span><span class="kw">:</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">path</span><span class="kw">:</span><span class="at"> backend/target/site/jacoco/</span></span></code></pre></div>
                <h3 id="view-in-github-actions">View in GitHub
                Actions</h3>
                <ol type="1">
                <li>Go to Actions ‚Üí Recent build</li>
                <li>Scroll to ‚ÄúArtifacts‚Äù section</li>
                <li>Download <code>jacoco-report.zip</code></li>
                <li>Extract and open <code>index.html</code> in
                browser</li>
                </ol>
                <h3 id="publish-to-github-pages">Publish to GitHub
                Pages</h3>
                <div class="sourceCode" id="cb14"><pre
                class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># After merge to main, coverage report auto-publishes to:</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co"># https://keglev.github.io/stockease/coverage/</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Link in README.md:</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># [![Coverage](https://img.shields.io/badge/coverage-70%25-yellow)](https://keglev.github.io/stockease/coverage/)</span></span></code></pre></div>
                <hr />
                <h2 id="coverage-best-practices">Coverage Best
                Practices</h2>
                <h3 id="do">‚úÖ Do</h3>
                <ul>
                <li>‚úÖ Test happy path (main flow)</li>
                <li>‚úÖ Test error cases (exceptions)</li>
                <li>‚úÖ Test authorization checks</li>
                <li>‚úÖ Test boundary conditions (empty lists, null
                values)</li>
                <li>‚úÖ Aim for 70%+ coverage on critical paths</li>
                <li>‚úÖ Use mutation testing to validate test
                quality</li>
                </ul>
                <h3 id="dont">‚ùå Don‚Äôt</h3>
                <ul>
                <li>‚ùå Aim for 100% coverage (diminishing returns)</li>
                <li>‚ùå Test generated code (getters/setters on
                entities)</li>
                <li>‚ùå Test Spring Framework code (security,
                config)</li>
                <li>‚ùå Write tests just to increase coverage (test
                quality matters)</li>
                <li>‚ùå Lower thresholds to pass build (fix code
                instead)</li>
                </ul>
                <hr />
                <h2 id="quality-metrics-dashboard-future">Quality
                Metrics Dashboard (Future)</h2>
                <h3 id="proposed-monitoring">Proposed Monitoring</h3>
                <pre><code>Coverage Trends (Last 30 Days)

Line Coverage:     70% ‚Üí 72% ‚Üë (Good)
Branch Coverage:   60% ‚Üí 62% ‚Üë (Good)
Test Count:        9  ‚Üí 12 ‚Üë (Growing)
Execution Time:    25s ‚Üí 28s ‚Üì (Acceptable)

Top Uncovered Code:
1. Product.calculateDiscount() ‚Äî 0% (unused feature)
2. AuthService.refreshToken() ‚Äî 0% (future)
3. ValidationUtil.validateEmail() ‚Äî 0% (imported, unused)</code></pre>
                <hr />
                <h2 id="related-documentation">Related
                Documentation</h2>
                <h3 id="testing-fundamentals">Testing Fundamentals</h3>
                <ul>
                <li><strong><a href="./strategy.html">Testing
                Strategy</a></strong> ‚Äî Coverage goals</li>
                <li><strong><a href="./pyramid.html">Test
                Pyramid</a></strong> ‚Äî Distribution of test types</li>
                <li><strong><a href="./ci-pipeline-tests.html">CI
                Pipeline Tests</a></strong> ‚Äî Coverage in CI/CD</li>
                </ul>
                <h3 id="implementation">Implementation</h3>
                <ul>
                <li><strong><a href="./spring-slices.html">Spring
                Slices</a></strong> ‚Äî How to write testable code</li>
                <li><strong><a
                href="./controller-integration.html">Controller
                Integration Tests</a></strong> ‚Äî HTTP test examples</li>
                <li><strong><a href="./security-tests.html">Security
                Tests</a></strong> ‚Äî Authorization coverage</li>
                </ul>
                <h3 id="main-architecture">Main Architecture</h3>
                <ul>
                <li><strong><a
                href="../testing-architecture.html">Testing
                Architecture</a></strong> ‚Äî Entry point</li>
                <li><strong><a href="../backend.html">Backend
                Architecture</a></strong> ‚Äî Code being measured</li>
                <li><strong><a
                href="../deployment.html">Deployment</a></strong> ‚Äî
                Publishing reports</li>
                </ul>
                <hr />
                <p><strong>Last Updated</strong>: October 31, 2025<br />
                <strong>Version</strong>: 1.0<br />
                <strong>Status</strong>: ‚úÖ Ready for implementation</p>
                <p><a href="../testing-architecture.html">Back to
                Testing Index</a></p>
            </div>
        </main>
    </div>

    <footer>
        <div class="footer-content">
            <p><strong>StockEase</strong> - Inventory Management System</p>
            <p>Architecture Documentation | Generated with Enterprise Standards</p>
            <p style="opacity: 0.7; font-size: 0.85rem;">¬© 2025 Team StockEase. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function getArchRoot() {
            const path = window.location.pathname;
            const segments = path.split('/').filter(s => s);
            
            // Find how many levels deep we are from 'architecture' folder
            const archIndex = segments.indexOf('architecture');
            if (archIndex === -1) return './';
            
            const depth = segments.length - archIndex - 2; // -2 for architecture and filename
            if (depth <= 0) return './';
            
            return '../'.repeat(depth);
        }

        // Navigation Menu (paths relative to architecture root)
        const navigation = {
            'API Documentation': [
                { label: 'Overview', href: 'api-docs.html', isApiDoc: true },
            ],
            'Architecture': [
                { label: 'Overview', href: 'overview.html' },
                { label: 'System Layers', href: 'layers.html' },
                { label: 'Backend Architecture', href: 'backend.html' },
                { label: 'Frontend Architecture', href: 'frontend.html' },
                { label: 'Security Architecture', href: 'security.html' },
                { label: 'Deployment Strategy', href: 'deployment.html' },
            ],
            'Design Decisions': [
                { label: 'Index', href: 'decisions/index.html' },
            ],
            'Components': [
                { label: 'Index', href: 'components/index.html' },
                { label: 'Analytics Service', href: 'components/analytics-service.html' },
                { label: 'Supplier Controller', href: 'components/supplier-controller.html' },
            ],
            'Patterns': [
                { label: 'Index', href: 'patterns/index.html' },
                { label: 'Repository Pattern', href: 'patterns/repository-pattern.html' },
                { label: 'Security Patterns', href: 'patterns/security-patterns.html' },
            ],
            'Testing': [
                { label: 'Architecture', href: 'testing-architecture.html' },
                { label: 'Test Pyramid', href: 'testing/pyramid.html' },
                { label: 'Strategy', href: 'testing/strategy.html' },
                { label: 'Spring Slices', href: 'testing/spring-slices.html' },
                { label: 'Test Data Fixtures', href: 'testing/test-data-fixtures.html' },
                { label: 'Security Tests', href: 'testing/security-tests.html' },
                { label: 'Naming Conventions', href: 'testing/naming-conventions.html' },
                { label: 'Test Matrix', href: 'testing/matrix.html' },
                { label: 'Coverage & Quality', href: 'testing/coverage-and-quality.html' },
                { label: 'Controller Integration', href: 'testing/controller-integration.html' },
                { label: 'CI Pipeline Tests', href: 'testing/ci-pipeline-tests.html' },
            ],
            'Deployment': [
                { label: 'Overview', href: 'deployment.html' },
                { label: 'CI/CD Pipeline', href: 'deployment/ci-pipeline.html' },
                { label: 'Docker Strategy', href: 'deployment/docker-strategy.html' },
                { label: 'Staging Config', href: 'deployment/staging-config.html' },
            ],
            'Reference': [
                { label: 'Documentation Guide', href: 'DOCUMENTATION-GUIDE.html' },
                { label: 'HTML Generation', href: 'DOCUMENTATION-GENERATION.html' },
                { label: 'Redundancy Analysis', href: 'REDUNDANCY-ANALYSIS.html' },
            ],
        };

        // Build sidebar
        function buildSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (!sidebar) return;

            const archRoot = getArchRoot();

            Object.entries(navigation).forEach(([section, links]) => {
                const navSection = document.createElement('div');
                navSection.className = 'nav-section';

                const title = document.createElement('div');
                title.className = 'nav-section-title';
                title.textContent = section;
                navSection.appendChild(title);

                const ul = document.createElement('ul');
                links.forEach(link => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    
                    // For API docs, go up to docs root; otherwise use architecture root
                    if (link.isApiDoc) {
                        a.href = archRoot + '../' + link.href;
                    } else {
                        a.href = archRoot + link.href;
                    }
                    
                    a.textContent = link.label;

                    // Highlight current page
                    const currentPath = window.location.pathname;
                    const linkPath = link.href.replace('.html', '');
                    if (currentPath.endsWith(link.href) || currentPath.includes(linkPath)) {
                        a.className = 'active';
                    }

                    li.appendChild(a);
                    ul.appendChild(li);
                });

                navSection.appendChild(ul);
                sidebar.appendChild(navSection);
            });
        }

        // Build table of contents highlight
        function initTableOfContents() {
            const tocLinks = document.querySelectorAll('nav.toc a');
            const headings = document.querySelectorAll('h2, h3');

            window.addEventListener('scroll', () => {
                let currentHeading = null;
                headings.forEach(heading => {
                    if (heading.getBoundingClientRect().top <= 100) {
                        currentHeading = heading;
                    }
                });

                tocLinks.forEach(link => {
                    link.classList.remove('active');
                    if (currentHeading) {
                        const href = link.getAttribute('href');
                        if (href === '#' + currentHeading.id) {
                            link.classList.add('active');
                        }
                    }
                });
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            buildSidebar();
            initTableOfContents();
        });
    </script>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
        });
        
        // Look for mermaid divs that were generated by Pandoc Lua filter
        const mermaidDivs = document.querySelectorAll('div.mermaid');
        
        mermaidDivs.forEach((div) => {
            // Verify mermaid content is present
            if (div.textContent.trim()) {
                // Content is ready for rendering
            }
        });
        
        // Also look for any code.language-mermaid blocks (fallback for compatibility)
        const codeMermaidBlocks = document.querySelectorAll('code.language-mermaid');
        
        codeMermaidBlocks.forEach((code) => {
            code.classList.remove('language-mermaid');
            code.classList.add('mermaid');
            // If wrapped in pre, mark pre as mermaid too
            if (code.parentElement.tagName === 'PRE') {
                code.parentElement.classList.add('mermaid-block');
            }
        });
        
        // Wait for DOM to be fully loaded, then render all mermaid diagrams
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    await mermaid.run();
                } catch (err) {
                    console.error('Mermaid rendering error:', err);
                }
            });
        } else {
            // Already loaded
            mermaid.run().catch(err => {
                console.error('Mermaid rendering error:', err);
            });
        }
    </script>
</body>
</html>
