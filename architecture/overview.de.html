<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> - StockEase Architecture Documentation</title>
    <link rel="stylesheet" href="/stockease/templates/enterprise-docs.css">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="/stockease/index.html" class="logo">ğŸ“š StockEase Architecture Docs</a>
            <nav class="nav-breadcrumb">
                <a href="/stockease/index.html">Home</a> / <span id="breadcrumb">Documentation</span>
            </nav>
        </div>
    </header>

    <div class="container">
        <aside id="sidebar"></aside>
        <main>
            <div class="content">
                <h1
                id="stockease-backend-architektur-Ã¼bersicht">StockEase
                Backend-Architektur â€“ Ãœbersicht</h1>
                <p><strong><a href="./overview.html">English
                Version</a></strong></p>
                <h2 id="zusammenfassung">Zusammenfassung</h2>
                <p>StockEase ist ein unternehmensgerechtes
                Bestandsverwaltungssystem, das mit <strong>Spring Boot
                3.5.7</strong> und <strong>PostgreSQL</strong>
                entwickelt wurde. Das Backend bietet RESTful APIs fÃ¼r
                Produktverwaltung, Authentifizierung und
                Bestandsverfolgung mit umfangreicher Testabdeckung (65+
                Tests) und containerisierter Bereitstellung auf
                Koyeb.</p>
                <p><strong>Live API</strong>:
                https://keglev.github.io/stockease/api-docs.html</p>
                <h2 id="geschÃ¤ftskontext">GeschÃ¤ftskontext</h2>
                <h3 id="problemstellung">Problemstellung</h3>
                <p>Unternehmen benÃ¶tigen eine zentrale, sichere und
                skalierbare Plattform, um: - BestÃ¤nde in Echtzeit zu
                verwalten - Benutzerzugriffe mit rollengestÃ¼tzter
                Authentifizierung zu kontrollieren - Lagerniveaus,
                Preise und Produktmetadaten zu verfolgen - ZuverlÃ¤ssige
                APIs fÃ¼r Frontend und Drittanbieter bereitzustellen</p>
                <h3 id="lÃ¶sungsarchitektur">LÃ¶sungsarchitektur</h3>
                <p>StockEase bietet: -
                <strong>Multi-User-UnterstÃ¼tzung</strong> mit
                rollengestÃ¼tzter Zugriffskontrolle (Admin, Benutzer) -
                <strong>RESTful API</strong> fÃ¼r CRUD-Operationen auf
                Produkten und BestÃ¤nden - <strong>Sichere
                Authentifizierung</strong> mit JWT-Tokens und
                BCrypt-Passwort-Hashing - <strong>Cloud-native
                Bereitstellung</strong> mit Containerisierung und
                automatischer Skalierung -
                <strong>Produktionsbereite</strong> Datenbank
                (PostgreSQL) mit automatischen Migrationen</p>
                <h2 id="c4-architekturmodell">C4-Architekturmodell</h2>
                <h3 id="kontextdiagramm-ebene-1">Kontextdiagramm (Ebene
                1)</h3>
                <div class="mermaid">
                graph LR
                  User([GeschÃ¤ftsbenutzer]) -->|verwendet| Frontend[Frontend React/Vite]
                  Frontend -->|HTTPS| API[(Spring Boot API)]
                  API -->|JDBC/Flyway| DB[(PostgreSQL oder Neon)]
                  API -->|ruft auf| External[(Externe Services)]
                </div>
                <h3 id="container-diagramm-ebene-2">Container-Diagramm
                (Ebene 2)</h3>
                <div class="mermaid">
                graph TB
                  subgraph Backend [StockEase Backend - Spring Boot]
                    API[API Endpoints]
                    BIZ[Business Logic Services]
                    DATA[Data Access Repositories Flyway]
                  end
                  API --> BIZ
                  BIZ --> DATA
                  DATA --> DB[(PostgreSQL oder Neon)]
                  API -->|exponiert| OpenAPI["/v3/api-docs"]
                  API -->|health| Health["/api/health"]
                </div>
                <h3
                id="komponenten-diagramm-ebene-3">Komponenten-Diagramm
                (Ebene 3)</h3>
                <h4 id="controllers-ebene">1. Controllers-Ebene</h4>
                <ul>
                <li><strong>AuthController</strong>:
                Authentifizierungs-Endpoints (Login, Registrierung,
                Token-Validierung)</li>
                <li><strong>ProductController</strong>:
                Produktverwaltungs-Endpoints (Erstellen, Lesen,
                Aktualisieren, LÃ¶schen, Suchen, Paginierung)</li>
                <li><strong>HealthController</strong>:
                System-GesundheitsprÃ¼fung</li>
                <li><strong>OpenAPI-Anmerkungen</strong>: Generiert
                automatisch API-Dokumentation</li>
                </ul>
                <h4 id="service-ebene">2. Service-Ebene</h4>
                <ul>
                <li><strong>AuthService</strong>:
                <ul>
                <li>Benutzerkreditvalidierung</li>
                <li>JWT-Token-Generierung und -Validierung</li>
                <li>Passwort-Hashing (BCrypt)</li>
                <li>RollengestÃ¼tzte Zugriffskontrolle</li>
                </ul></li>
                <li><strong>ProductService</strong>:
                <ul>
                <li>GeschÃ¤ftslogik fÃ¼r CRUD-Produktoperationen</li>
                <li>Filter- und Suchfunktionen</li>
                <li>Paginierung und Sortierung</li>
                <li>Datenvalidierung</li>
                </ul></li>
                <li><strong>HealthService</strong>:
                <ul>
                <li>DatenbankverbindungsprÃ¼fungen</li>
                <li>Anwendungsstatus-Berichterstattung</li>
                </ul></li>
                </ul>
                <h4 id="repository-ebene-spring-data-jpa">3.
                Repository-Ebene (Spring Data JPA)</h4>
                <ul>
                <li><strong>AuthRepository</strong>:
                Benutzerpersistenz</li>
                <li><strong>ProductRepository</strong>:
                Produktpersistenz</li>
                <li><strong>Benutzerdefinierte Abfragen</strong> fÃ¼r
                komplexe Filter</li>
                </ul>
                <h4 id="sicherheits-ebene">4. Sicherheits-Ebene</h4>
                <ul>
                <li><strong>JWT-Provider</strong>: Token-Generierung und
                -Validierung</li>
                <li><strong>BCrypt</strong>: Passwort-Hashing</li>
                <li><strong>Spring Security</strong>: HTTP Basic und
                Bearer Token Authentifizierung</li>
                <li><strong>CORS-Konfiguration</strong>:
                Frontend-Integration</li>
                </ul>
                <h4 id="datenzugriff-ebene">5. Datenzugriff-Ebene</h4>
                <ul>
                <li><strong>Flyway</strong>: Datenbank-Versionierung und
                Migrationen</li>
                <li><strong>PostgreSQL 17.5</strong>:
                Produktionsdatenbank (Neon)</li>
                <li><strong>H2</strong>: In-Memory-Test-Datenbank</li>
                </ul>
                <h2
                id="bereitstellungsarchitektur">Bereitstellungsarchitektur</h2>
                <h3 id="produktionsumgebung">Produktionsumgebung</h3>
                <pre><code>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub Repository              â”‚
â”‚   (main + docs branches)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“ Push to main
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GitHub Actions CI/CD           â”‚
â”‚   â”œâ”€â”€ Build &amp; Test               â”‚
â”‚   â”œâ”€â”€ Push to GHCR               â”‚
â”‚   â”œâ”€â”€ Deploy to Koyeb            â”‚
â”‚   â””â”€â”€ Generate Docs â†’ docs branchâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“ Container Image
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Koyeb Container Service        â”‚
â”‚   (Auto-scaling)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“ JDBC Connection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Neon PostgreSQL 17.5           â”‚
â”‚   (Serverless Database)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Docs Branch â†’ GitHub Pages
https://Keglev.github.io/stockease/</code></pre>
                <h2 id="technologie-stack">Technologie-Stack</h2>
                <table>
                <colgroup>
                <col style="width: 19%" />
                <col style="width: 30%" />
                <col style="width: 25%" />
                <col style="width: 25%" />
                </colgroup>
                <thead>
                <tr class="header">
                <th>Ebene</th>
                <th>Technologie</th>
                <th>Version</th>
                <th>Zweck</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>Runtime</strong></td>
                <td>Java</td>
                <td>17 LTS</td>
                <td>JVM-Laufzeit</td>
                </tr>
                <tr class="even">
                <td><strong>Framework</strong></td>
                <td>Spring Boot</td>
                <td>3.5.7</td>
                <td>REST API Framework</td>
                </tr>
                <tr class="odd">
                <td><strong>Sicherheit</strong></td>
                <td>Spring Security</td>
                <td>6.3.1</td>
                <td>Authentifizierung &amp; Autorisierung</td>
                </tr>
                <tr class="even">
                <td><strong>Datenzugriff</strong></td>
                <td>Spring Data JPA</td>
                <td>3.3.7</td>
                <td>ORM und Datenbankabstraktion</td>
                </tr>
                <tr class="odd">
                <td><strong>Migrationen</strong></td>
                <td>Flyway</td>
                <td>11.7.2</td>
                <td>Datenbank-Versionierung</td>
                </tr>
                <tr class="even">
                <td><strong>Datenbank</strong></td>
                <td>PostgreSQL</td>
                <td>17.5</td>
                <td>Produktionsdatenspeicher</td>
                </tr>
                <tr class="odd">
                <td><strong>Testing</strong></td>
                <td>JUnit 5</td>
                <td>5.10.2</td>
                <td>Unit-Test-Framework</td>
                </tr>
                <tr class="even">
                <td><strong>Test DB</strong></td>
                <td>H2</td>
                <td>2.3.232</td>
                <td>In-Memory-Test-Datenbank</td>
                </tr>
                <tr class="odd">
                <td><strong>Build</strong></td>
                <td>Maven</td>
                <td>3.9.x</td>
                <td>Build-Automatisierung</td>
                </tr>
                <tr class="even">
                <td><strong>Dokumentation</strong></td>
                <td>SpringDoc OpenAPI</td>
                <td>2.4.0</td>
                <td>OpenAPI/Swagger-Generierung</td>
                </tr>
                <tr class="odd">
                <td><strong>Container</strong></td>
                <td>Docker</td>
                <td>Latest</td>
                <td>Containerisierung</td>
                </tr>
                <tr class="even">
                <td><strong>Bereitstellung</strong></td>
                <td>Koyeb</td>
                <td>-</td>
                <td>Cloud-Plattform</td>
                </tr>
                </tbody>
                </table>
                <h2 id="wichtige-designentscheidungen">Wichtige
                Designentscheidungen</h2>
                <h3 id="jwt-basierte-authentifizierung">1. JWT-basierte
                Authentifizierung</h3>
                <p><strong>Entscheidung</strong>: JWT-Tokens statt
                sitzungsbasierter Authentifizierung verwenden - âœ…
                Zustandsloses Design ermÃ¶glicht horizontale Skalierung -
                âœ… Funktioniert gut mit containerisierten Microservices
                - âœ… UnterstÃ¼tzt Frontend-SPA-Anwendungen - âœ… Bessere
                Mobile-App-Integration</p>
                <h3 id="postgresql-Ã¼ber-h2-produktion">2. PostgreSQL
                Ã¼ber H2 (Produktion)</h3>
                <p><strong>Entscheidung</strong>: PostgreSQL fÃ¼r
                Produktion, H2 fÃ¼r Tests - âœ… ACID-Compliance und
                ZuverlÃ¤ssigkeit - âœ… BewÃ¤hrte Enterprise-Datenbank - âœ…
                Bessere Leistung fÃ¼r Produktionslasten - âœ… H2 fÃ¼r
                schnelle lokale TestausfÃ¼hrung</p>
                <h3 id="flyway-fÃ¼r-datenbankmigration">3. Flyway fÃ¼r
                Datenbankmigration</h3>
                <p><strong>Entscheidung</strong>: Flyway statt Hibernate
                auto-ddl verwenden - âœ… Versionskontrolle fÃ¼r
                Datenbankschema - âœ… Reproduzierbare Bereitstellungen -
                âœ… Sichere Migrationen mit Validierung - âœ… Funktioniert
                mit H2 (Tests) und PostgreSQL (Produktion)</p>
                <h3 id="spring-data-jpa-fÃ¼r-persistenz">4. Spring Data
                JPA fÃ¼r Persistenz</h3>
                <p><strong>Entscheidung</strong>: Spring Data JPA statt
                reines SQL verwenden - âœ… Reduziert Boilerplate-Code -
                âœ… Datenbankagnostisch (H2/PostgreSQL) - âœ… Automatische
                Abfragegenerierung - âœ… Integrierte Paginierung und
                Sortierung</p>
                <h3 id="containerisierte-bereitstellung-koyeb">5.
                Containerisierte Bereitstellung (Koyeb)</h3>
                <p><strong>Entscheidung</strong>: Containerbasierte
                Bereitstellung - âœ… Konsistente Umgebung von Entwicklung
                bis Produktion - âœ… Einfache automatische Skalierung -
                âœ… Nahtlose CI/CD-Integration - âœ…
                Infrastructure-as-Code-Ansatz</p>
                <h2 id="datenmodelle">Datenmodelle</h2>
                <h3
                id="benutzerauthentifizierungs-entity">Benutzer/Authentifizierungs-Entity</h3>
                <pre><code>User
â”œâ”€â”€ id: UUID (Primary Key)
â”œâ”€â”€ username: String (Unique)
â”œâ”€â”€ email: String (Unique)
â”œâ”€â”€ password: String (BCrypt hashed)
â”œâ”€â”€ role: Enum (ADMIN, USER)
â”œâ”€â”€ createdAt: Timestamp
â””â”€â”€ updatedAt: Timestamp</code></pre>
                <h3 id="produkt-entity">Produkt-Entity</h3>
                <pre><code>Product
â”œâ”€â”€ id: UUID (Primary Key)
â”œâ”€â”€ name: String
â”œâ”€â”€ description: Text
â”œâ”€â”€ price: BigDecimal
â”œâ”€â”€ quantity: Integer
â”œâ”€â”€ sku: String (Unique)
â”œâ”€â”€ category: String
â”œâ”€â”€ createdAt: Timestamp
â”œâ”€â”€ updatedAt: Timestamp
â””â”€â”€ createdBy: UUID (Foreign Key to User)</code></pre>
                <h2 id="api-endpoints-Ã¼bersicht">API-Endpoints â€“
                Ãœbersicht</h2>
                <table>
                <colgroup>
                <col style="width: 18%" />
                <col style="width: 22%" />
                <col style="width: 38%" />
                <col style="width: 20%" />
                </colgroup>
                <thead>
                <tr class="header">
                <th>Methode</th>
                <th>Endpoint</th>
                <th>Authentifizierung</th>
                <th>Zweck</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td>POST</td>
                <td><code>/api/auth/login</code></td>
                <td>Keine (Ã¶ffentlich)</td>
                <td>Anmeldedaten authentifizieren und JWT-Token
                zurÃ¼ckgeben</td>
                </tr>
                <tr class="even">
                <td>GET</td>
                <td><code>/api/health</code></td>
                <td>Keine</td>
                <td>GesundheitsprÃ¼fung (Datenbankverbindungs-Probe)</td>
                </tr>
                <tr class="odd">
                <td>GET</td>
                <td><code>/api/products</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Alle Produkte auflisten (sortiert)</td>
                </tr>
                <tr class="even">
                <td>GET</td>
                <td><code>/api/products/paged</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Paginierte Produktliste (Query: page, size)</td>
                </tr>
                <tr class="odd">
                <td>GET</td>
                <td><code>/api/products/{id}</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Einzelnes Produkt nach ID abrufen</td>
                </tr>
                <tr class="even">
                <td>POST</td>
                <td><code>/api/products</code></td>
                <td>JWT (ADMIN)</td>
                <td>Produkt erstellen</td>
                </tr>
                <tr class="odd">
                <td>PUT</td>
                <td><code>/api/products/{id}/quantity</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Produktmenge aktualisieren</td>
                </tr>
                <tr class="even">
                <td>PUT</td>
                <td><code>/api/products/{id}/price</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Produktpreis aktualisieren</td>
                </tr>
                <tr class="odd">
                <td>PUT</td>
                <td><code>/api/products/{id}/name</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Produktname aktualisieren</td>
                </tr>
                <tr class="even">
                <td>GET</td>
                <td><code>/api/products/low-stock</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Produkte mit Menge &lt; 5 auflisten</td>
                </tr>
                <tr class="odd">
                <td>GET</td>
                <td><code>/api/products/search?name=...</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Produkte nach Name suchen</td>
                </tr>
                <tr class="even">
                <td>DELETE</td>
                <td><code>/api/products/{id}</code></td>
                <td>JWT (ADMIN)</td>
                <td>Produkt nach ID lÃ¶schen</td>
                </tr>
                <tr class="odd">
                <td>GET</td>
                <td><code>/api/products/total-stock-value</code></td>
                <td>JWT (ADMIN, USER)</td>
                <td>Aggregierten Gesamtbestandswert abrufen</td>
                </tr>
                <tr class="even">
                <td>GET</td>
                <td><code>/v3/api-docs</code></td>
                <td>Keine</td>
                <td>OpenAPI-Spezifikation (fÃ¼r ReDoc-Generierung)</td>
                </tr>
                </tbody>
                </table>
                <h2 id="qualitÃ¤tsattribute">QualitÃ¤tsattribute</h2>
                <table>
                <colgroup>
                <col style="width: 41%" />
                <col style="width: 25%" />
                <col style="width: 33%" />
                </colgroup>
                <thead>
                <tr class="header">
                <th>Attribut</th>
                <th>Ziel</th>
                <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr class="odd">
                <td><strong>Testabdeckung</strong></td>
                <td>&gt;80%</td>
                <td>âœ… 65+ Tests erfolgreich</td>
                </tr>
                <tr class="even">
                <td><strong>VerfÃ¼gbarkeit</strong></td>
                <td>99,9%</td>
                <td>âœ… Automatische Skalierung auf Koyeb</td>
                </tr>
                <tr class="odd">
                <td><strong>Antwortzeit</strong></td>
                <td>&lt;200ms</td>
                <td>âœ… In-Memory-Caching wo erforderlich</td>
                </tr>
                <tr class="even">
                <td><strong>Skalierbarkeit</strong></td>
                <td>Horizontal</td>
                <td>âœ… Zustandsloses Design, containerisiert</td>
                </tr>
                <tr class="odd">
                <td><strong>Sicherheit</strong></td>
                <td>Enterprise</td>
                <td>âœ… JWT + BCrypt + CORS</td>
                </tr>
                <tr class="even">
                <td><strong>Dokumentation</strong></td>
                <td>Auto-generiert</td>
                <td>âœ… OpenAPI (springdoc) + ReDoc (CI) + JaCoCo</td>
                </tr>
                </tbody>
                </table>
                <h2 id="monitoring-beobachtbarkeit">Monitoring &amp;
                Beobachtbarkeit</h2>
                <h3 id="aktuelle-metriken">Aktuelle Metriken</h3>
                <ul>
                <li>Build-Zeit: ~2â€“3 Minuten</li>
                <li>TestausfÃ¼hrung: &lt;1 Minute</li>
                <li>Container-Startup: &lt;10 Sekunden</li>
                <li>Durchschnittliche Antwortzeit: 50â€“150 ms</li>
                </ul>
                <h3 id="logs-debugging">Logs &amp; Debugging</h3>
                <ul>
                <li>Anwendungslogs via stdout/stderr (Koyeb
                erfasst)</li>
                <li>Request/Response-Logging in kritischen Pfaden</li>
                <li>Fehler-Tracking via HTTP-Statuscodes</li>
                <li>Performance-Metriken via OpenAPI-Dokumentation</li>
                </ul>
                <h2 id="zukÃ¼nftige-verbesserungen">ZukÃ¼nftige
                Verbesserungen</h2>
                <ol type="1">
                <li><strong>Verteiltes Tracing</strong>: OpenTelemetry
                implementieren</li>
                <li><strong>Caching-Schicht</strong>: Redis fÃ¼r hÃ¤ufig
                abgerufene Daten hinzufÃ¼gen</li>
                <li><strong>Message Queue</strong>: Kafka fÃ¼r asynchrone
                Operationen implementieren</li>
                <li><strong>Erweiterte Suche</strong>: Elasticsearch fÃ¼r
                Produktsuche hinzufÃ¼gen</li>
                <li><strong>Multi-Tenancy</strong>: UnterstÃ¼tzung fÃ¼r
                mehrere Organisationen</li>
                <li><strong>API Rate Limiting</strong>: Rate Limiting
                pro Benutzer/API-SchlÃ¼ssel implementieren</li>
                </ol>
                <hr />
                <h2 id="verwandte-dokumentation">Verwandte
                Dokumentation</h2>
                <h3
                id="hauptarchitektur-themen">Hauptarchitektur-Themen</h3>
                <ul>
                <li><strong><a
                href="./backend.html">Backend-Architektur</a></strong> -
                Spring Boot Schichtenarchitektur, Controller, Services,
                Repositories</li>
                <li><strong><a
                href="./frontend.html">Frontend-Architektur</a></strong>
                - React 18 Stack, Komponenten, State Management</li>
                <li><strong><a
                href="./layers.html">Service-Schichten</a></strong> -
                Controller, Service, Repository Muster und
                Datenfluss</li>
                <li><strong><a
                href="./security.html">Sicherheitsarchitektur</a></strong>
                - JWT, Authentifizierung, Autorisierung, RBAC</li>
                <li><strong><a
                href="./deployment.html">Bereitstellungsarchitektur</a></strong>
                - Infrastruktur, CI/CD, Monitoring, Disaster
                Recovery</li>
                </ul>
                <h3
                id="architektur-entscheidungen-adrs">Architektur-Entscheidungen
                (ADRs)</h3>
                <ul>
                <li><strong><a
                href="./decisions/001-database-choice.html">Datenbankwahl</a></strong>
                - Warum PostgreSQL Ã¼ber H2 fÃ¼r Produktion</li>
                <li><strong><a
                href="./decisions/002-validation-strategy.html">Validierungsstrategie</a></strong>
                - Eingabevalidierung und Business-Rule-Durchsetzung</li>
                </ul>
                <h3 id="design-muster-best-practices">Design-Muster
                &amp; Best Practices</h3>
                <ul>
                <li><strong><a
                href="./patterns/repository-pattern.html">Repository-Muster</a></strong>
                - Spring Data JPA Repository-Implementierung</li>
                <li><strong><a
                href="./patterns/security-patterns.html">Sicherheitsmuster</a></strong>
                - JWT, BCrypt, CORS Best Practices</li>
                </ul>
                <h3 id="infrastruktur-bereitstellung">Infrastruktur
                &amp; Bereitstellung</h3>
                <ul>
                <li><strong><a
                href="./deployment/ci-pipeline.html">CI/CD-Pipeline</a></strong>
                - GitHub Actions, automatisiertes Testing,
                Bereitstellung</li>
                <li><strong><a
                href="./deployment/staging-config.html">Staging-Konfiguration</a></strong>
                - Staging-Umgebungssetup und Testing</li>
                </ul>
                <h3 id="navigation">Navigation</h3>
                <ul>
                <li><strong><a href="./index.html">Index</a></strong> -
                Dokumentations-Hub mit Lesepfaden nach Rolle</li>
                <li><strong><a href="../index.html">Hauptdokumentation
                Index</a></strong> - Alle Backend-Dokumentation</li>
                </ul>
                <hr />
                <p><strong>Dokumentversion</strong>: 1.0<br />
                <strong>Zuletzt aktualisiert</strong>: 31. Oktober
                2025<br />
                <strong>Status</strong>: Produktion<br />
                <strong>Branch</strong>: main</p>
            </div>
        </main>
    </div>

    <footer>
        <div class="footer-content">
            <p><strong>StockEase</strong> - Inventory Management System</p>
            <p>Architecture Documentation | Generated with Enterprise Standards</p>
            <p style="opacity: 0.7; font-size: 0.85rem;">Â© 2025 Team StockEase. All rights reserved.</p>
        </div>
    </footer>

    <script>
        function getArchRoot() {
            const path = window.location.pathname;
            const segments = path.split('/').filter(s => s);
            
            // Find how many levels deep we are from 'architecture' folder
            const archIndex = segments.indexOf('architecture');
            if (archIndex === -1) return './';
            
            const depth = segments.length - archIndex - 2; // -2 for architecture and filename
            if (depth <= 0) return './';
            
            return '../'.repeat(depth);
        }

        // Navigation Menu (paths relative to architecture root)
        const navigation = {
            'API Documentation': [
                { label: 'Overview', href: 'api-docs.html', isApiDoc: true },
            ],
            'Architecture': [
                { label: 'Overview', href: 'overview.html' },
                { label: 'Ãœbersicht (Deutsch)', href: 'overview.de.html' },
                { label: 'System Layers', href: 'layers.html' },
                { label: 'Backend Architecture', href: 'backend.html' },
                { label: 'Frontend Architecture', href: 'frontend.html' },
                { label: 'Security Architecture', href: 'security.html' },
                { label: 'Deployment Strategy', href: 'deployment.html' },
            ],
            'Design Decisions': [
                { label: 'Index', href: 'decisions/index.html' },
            ],
            'Components': [
                { label: 'Index', href: 'components/index.html' },
                { label: 'Analytics Service', href: 'components/analytics-service.html' },
                { label: 'Supplier Controller', href: 'components/supplier-controller.html' },
            ],
            'Patterns': [
                { label: 'Index', href: 'patterns/index.html' },
                { label: 'Repository Pattern', href: 'patterns/repository-pattern.html' },
                { label: 'Security Patterns', href: 'patterns/security-patterns.html' },
            ],
            'Testing': [
                { label: 'Architecture', href: 'testing-architecture.html' },
                { label: 'Test Pyramid', href: 'testing/pyramid.html' },
                { label: 'Strategy', href: 'testing/strategy.html' },
                { label: 'Spring Slices', href: 'testing/spring-slices.html' },
                { label: 'Test Data Fixtures', href: 'testing/test-data-fixtures.html' },
                { label: 'Security Tests', href: 'testing/security-tests.html' },
                { label: 'Naming Conventions', href: 'testing/naming-conventions.html' },
                { label: 'Test Matrix', href: 'testing/matrix.html' },
                { label: 'Coverage & Quality', href: 'testing/coverage-and-quality.html' },
                { label: 'Controller Integration', href: 'testing/controller-integration.html' },
                { label: 'CI Pipeline Tests', href: 'testing/ci-pipeline-tests.html' },
            ],
            'Deployment': [
                { label: 'Overview', href: 'deployment.html' },
                { label: 'CI/CD Pipeline', href: 'deployment/ci-pipeline.html' },
                { label: 'Docker Strategy', href: 'deployment/docker-strategy.html' },
                { label: 'Staging Config', href: 'deployment/staging-config.html' },
            ],
            'Reference': [
                { label: 'Documentation Guide', href: 'DOCUMENTATION-GUIDE.html' },
                { label: 'Documentation Generation', href: 'DOCUMENTATION-GENERATION.html' },
            ],
            'Quality & Coverage': [
                { label: 'Test Coverage Report', href: 'coverage/index.html', isCoverage: true },
            ],
        };

        // Build sidebar
        function buildSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (!sidebar) return;

            const archRoot = getArchRoot();

            Object.entries(navigation).forEach(([section, links]) => {
                const navSection = document.createElement('div');
                navSection.className = 'nav-section';

                const title = document.createElement('div');
                title.className = 'nav-section-title';
                title.textContent = section;
                navSection.appendChild(title);

                const ul = document.createElement('ul');
                links.forEach(link => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    
                    // For API docs and coverage, go up to docs root; otherwise use architecture root
                    if (link.isApiDoc || link.isCoverage) {
                        a.href = archRoot + '../' + link.href;
                    } else {
                        a.href = archRoot + link.href;
                    }
                    
                    a.textContent = link.label;

                    // Highlight current page
                    const currentPath = window.location.pathname;
                    const linkPath = link.href.replace('.html', '');
                    if (currentPath.endsWith(link.href) || currentPath.includes(linkPath)) {
                        a.className = 'active';
                    }

                    li.appendChild(a);
                    ul.appendChild(li);
                });

                navSection.appendChild(ul);
                sidebar.appendChild(navSection);
            });
        }

        // Build table of contents highlight
        function initTableOfContents() {
            const tocLinks = document.querySelectorAll('nav.toc a');
            const headings = document.querySelectorAll('h2, h3');

            window.addEventListener('scroll', () => {
                let currentHeading = null;
                headings.forEach(heading => {
                    if (heading.getBoundingClientRect().top <= 100) {
                        currentHeading = heading;
                    }
                });

                tocLinks.forEach(link => {
                    link.classList.remove('active');
                    if (currentHeading) {
                        const href = link.getAttribute('href');
                        if (href === '#' + currentHeading.id) {
                            link.classList.add('active');
                        }
                    }
                });
            });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            buildSidebar();
            initTableOfContents();
        });
    </script>

    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        
        mermaid.initialize({ 
            startOnLoad: false,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
        });
        
        // Look for mermaid divs that were generated by Pandoc Lua filter
        const mermaidDivs = document.querySelectorAll('div.mermaid');
        
        mermaidDivs.forEach((div) => {
            // Verify mermaid content is present
            if (div.textContent.trim()) {
                // Content is ready for rendering
            }
        });
        
        // Also look for any code.language-mermaid blocks (fallback for compatibility)
        const codeMermaidBlocks = document.querySelectorAll('code.language-mermaid');
        
        codeMermaidBlocks.forEach((code) => {
            code.classList.remove('language-mermaid');
            code.classList.add('mermaid');
            // If wrapped in pre, mark pre as mermaid too
            if (code.parentElement.tagName === 'PRE') {
                code.parentElement.classList.add('mermaid-block');
            }
        });
        
        // Wait for DOM to be fully loaded, then render all mermaid diagrams
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', async () => {
                try {
                    await mermaid.run();
                } catch (err) {
                    console.error('Mermaid rendering error:', err);
                }
            });
        } else {
            // Already loaded
            mermaid.run().catch(err => {
                console.error('Mermaid rendering error:', err);
            });
        }
    </script>
</body>
</html>
