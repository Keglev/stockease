# Production properties: Flyway removed from runtime; migrations are applied manually
# Disable Flyway at runtime (migrations will be applied externally)
spring.flyway.enabled=false

# Keep Hibernate DDL disabled; schema must be created in the DB beforehand
spring.jpa.hibernate.ddl-auto=none

# Server port (matches Docker runtime)
server.port=8081

# Expose actuator health and info endpoints in prod (only health/info)
management.endpoints.web.exposure.include=health,info
# Show DB details (useful for debugging; consider restricting in long-term)
management.endpoint.health.show-details=always

# HikariCP tuning: prefer closing idle connections so DB can scale-to-zero
# Let all connections close when idle and keep a small pool on wake
spring.datasource.hikari.minimum-idle=0
spring.datasource.hikari.maximum-pool-size=5

# Close idle connections fairly quickly (2 min)
spring.datasource.hikari.idle-timeout=120000

# Reasonable time to wait for a connection on wake (10s)
spring.datasource.hikari.connection-timeout=10000

# Typical lifetime below many proxies' max (30 min)
spring.datasource.hikari.max-lifetime=1800000

# Actuator probes: enable probe support and exclude DB from automatic liveness
# Koyeb should use /actuator/health/liveness as the liveness path
management.endpoint.health.probes.enabled=true
# Disable the DB contributor for health so liveness won't fail while DB is sleeping
management.health.db.enabled=false
